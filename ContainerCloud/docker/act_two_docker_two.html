<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.47" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://www.bugcode.online/ContainerCloud/docker/act_two_docker_two.html"><meta property="og:site_name" content="bugcode çš„æ¶æ„ä¹‹è·¯"><meta property="og:title" content="2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´"><meta property="og:description" content="2 Dockerå¤æ‚å®‰è£…è¯¦è¯´ 1.1 å®‰è£…MySQLä¸»ä»å¤åˆ¶ 1.1.1 ä¸»ä»å¤åˆ¶åŸç† MySQLä¸»ä»å¤åˆ¶åŸç†_ç‰›å¥”çš„åšå®¢-CSDNåšå®¢ 1.1.2 ä¸»ä»æ­å»ºæ­¥éª¤ æ–°å»ºä¸»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3307 è¿›å…¥/mydata/mysql-master/confç›®å½•ä¸‹æ–°å»ºmy.cnf ä¿®æ”¹å®Œé…ç½®åé‡å¯masterå®ä¾‹ è¿›å…¥mysql-masterå®¹å™¨ masterå®¹..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995661799-39e995e2-73e0-4e7d-bc9d-59c1fa0b8e3c.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-12T07:44:04.000Z"><meta property="article:author" content="bugcode"><meta property="article:tag" content="docker"><meta property="article:tag" content="äº‘åŸç”Ÿ"><meta property="article:published_time" content="2024-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2024-08-12T07:44:04.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´","image":["https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995661799-39e995e2-73e0-4e7d-bc9d-59c1fa0b8e3c.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995728716-90fc0143-7a4d-465e-83c1-a17bad83823e.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995798230-fbe9f08c-af5d-4e83-915d-62302a5ad1a1.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995805394-60a39a9a-8be4-43b7-9489-84afd4ef0310.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658996785793-2ca8867b-2254-45ee-8bc7-8f566d737db2.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999862145-25f18b54-2e15-47f3-a873-a5d44a16f866.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999891472-39767eb6-5396-4b43-9cfb-71103e0758ec.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999908647-d6826cc9-9435-4701-8e42-9aaf09cee0be.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999941543-94276993-0b80-4c0d-8804-662831456bc2.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000035920-385ef89f-50cc-497a-9954-b91df3b4e84a.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000055531-fe1191aa-34b3-46d8-9981-b7ff2ad7f2a7.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000479815-61ec964c-ad1b-4a75-a379-a5aa680199f1.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000487455-b7174e19-35ee-472e-8884-2fad95f1edbc.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000531546-75739be6-1aee-4165-9dfb-6ac727deddf6.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000521473-2a5a3350-1bd4-4394-b4dd-496f4e024034.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660012864805-18937b87-0167-4c81-9d75-f485a61c5304.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013094449-a1af09f8-c696-4f09-a5de-6ee1844fb424.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013238837-86e640c5-49ef-424a-81d0-bc702f35389b.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013257101-5b63a752-99eb-4678-b2de-a527717ccbcc.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013470341-d8868461-36e0-412b-9763-233d14746823.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013529609-d6979855-7c7d-4782-803c-43b2d6c871c0.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013524209-af8d1240-9240-4fa7-8582-78e3e6704212.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013696660-44f47c05-55ed-49ea-b01b-d5c5ceaad1f9.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013728508-f1d618bc-11f9-4fc2-acdd-c5b111ee1804.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013737191-54f5780e-bc5f-419a-92e5-95f980e7cb7d.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013973533-8d49c0c9-0ea4-45a0-b2e3-14d3f28a33a0.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013999567-eea06f1d-f9ac-425e-a851-c5dda92b5ce5.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014531015-748a0daa-758a-44ea-9496-34d5e34810e0.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014469696-1c74ba76-2119-4031-8337-4ab9880aec14.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014597535-9bd29a0a-3a5e-4e51-bad4-df136dd6c0fd.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014603485-ae9f7bae-798e-4538-9a35-05ddd6226cc5.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014631293-415ef8b0-d5c7-4107-9c47-19b58f568931.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014653132-0f14d9d0-133d-436f-93ec-4a4dc6625ff4.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014736138-8bb82a47-f06e-458d-b445-24077db9bdcd.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014743652-1ed51439-61d8-4641-b75d-529e8bc74eb6.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014763642-61295eb3-d313-4f8b-873c-ca674dff3b4d.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014788578-6dfe4fa8-d48d-402a-8c88-0ec91503aa7a.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014827592-6677a045-601e-40ae-b864-752c300a67ec.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015228582-d53dce4a-89a7-4f66-bbc1-4efc307f24d3.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015279664-11ace734-3cac-448d-acf2-415ff4618e8e.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015379854-488ba2d7-ee4a-4e28-8b07-9fa24f239263.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015407249-1b8e1153-a117-406c-bc76-f9688c909e0d.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015422129-27734091-90d4-43cf-8725-27c4eef8548e.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016500199-9bfcce87-7c5d-4ac4-8d40-3e9e9491a0fd.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016581784-bbd7401b-0304-40e5-b3d4-143e1b6adbcd.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016611099-39c73410-3a1c-4576-b566-48234db9c1bc.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660020074503-4a28db4d-8a0f-4f21-ab74-0b999e579207.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660020104133-dbc519f6-d0e1-4bec-af0c-40ec9db8d1e4.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028923163-79ad77b4-a9ae-4dd6-8786-aacd45788733.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028984092-3cd2b316-73da-4072-b045-de7fbcb392a3.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028988258-aa1db7cd-2f6f-4e08-b991-875723ee24de.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028995174-805d3a36-8f02-4c56-a753-0048a859cd73.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660032915706-ca6ff6ae-5f12-4932-9a51-934cd86d5222.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033430938-9526470c-089a-4cde-8ee9-5bd3328f32fb.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033444646-6696d6a3-ca9b-4546-88a4-89909eddf89d.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033451033-300878aa-e6ba-42f1-9264-be57d65b87b3.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033457920-8e9618b2-6979-4d7c-8071-a2a098dc1128.png","https://cdn.nlark.com/yuque/0/2022/png/27791237/1660034195809-591c7f4b-dd7b-46a2-9865-7e2c01ae8239.png"],"datePublished":"2024-01-01T00:00:00.000Z","dateModified":"2024-08-12T07:44:04.000Z","author":[{"@type":"Person","name":"bugcode"}]}</script><meta name="robots" content="all"><meta name="author" content="bugcode"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="Java, JavaåŸºç¡€, å¹¶å‘ç¼–ç¨‹, JVM, è™šæ‹Ÿæœº, æ•°æ®åº“, MySQL, Spring, Redis, MyBatis, SpringBoot, IDEA, æ±‚èŒé¢è¯•, é¢æ¸£é€†è¢­, å­¦ä¹ è·¯çº¿"><meta name="apple-mobile-web-app-capable" content="yes"><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5230ac143650bf5eb3c14f3fb9b1d3ec";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4570931_i3acfllzyt.css"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><title>2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´ | bugcode çš„æ¶æ„ä¹‹è·¯</title><meta name="description" content="2 Dockerå¤æ‚å®‰è£…è¯¦è¯´ 1.1 å®‰è£…MySQLä¸»ä»å¤åˆ¶ 1.1.1 ä¸»ä»å¤åˆ¶åŸç† MySQLä¸»ä»å¤åˆ¶åŸç†_ç‰›å¥”çš„åšå®¢-CSDNåšå®¢ 1.1.2 ä¸»ä»æ­å»ºæ­¥éª¤ æ–°å»ºä¸»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3307 è¿›å…¥/mydata/mysql-master/confç›®å½•ä¸‹æ–°å»ºmy.cnf ä¿®æ”¹å®Œé…ç½®åé‡å¯masterå®ä¾‹ è¿›å…¥mysql-masterå®¹å™¨ masterå®¹...">
    <link rel="stylesheet" href="/assets/css/styles.6b04e72b.css">
    <link rel="preload" href="/assets/js/runtime~app.e972e9bb.js" as="script"><link rel="preload" href="/assets/css/styles.6b04e72b.css" as="style"><link rel="preload" href="/assets/js/9547.c8ff98a9.js" as="script"><link rel="preload" href="/assets/js/app.8a0774db.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://vscodepic.oss-cn-beijing.aliyuncs.com/blog/log.jpg" alt><!----><span class="vp-site-name hide-in-pad">bugcode çš„æ¶æ„ä¹‹è·¯</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon iconfont icon-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/introduction/" aria-label="å¯¼è¯»"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->å¯¼è¯»<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç®—æ³•"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>ç®—æ³•<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algorithm/algor/" aria-label="ç®—æ³•ä¸“é¢˜"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->ç®—æ³•ä¸“é¢˜<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/algorithm/dataStructure/" aria-label="æ•°æ®ç»“æ„ä¸“é¢˜"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->æ•°æ®ç»“æ„ä¸“é¢˜<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è®¾è®¡æ¨¡å¼"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>è®¾è®¡æ¨¡å¼<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/designpattern/designPrinciple/" aria-label="è®¾è®¡åŸåˆ™"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->è®¾è®¡åŸåˆ™<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/designpattern/creational/" aria-label="åˆ›å»ºå‹"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->åˆ›å»ºå‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/designpattern/Behavior/" aria-label="è¡Œä¸ºå‹"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->è¡Œä¸ºå‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/designpattern/structural/" aria-label="ç»“æ„å‹"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->ç»“æ„å‹<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æºç "><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>æºç <!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/frameDesignAndSourceCode/springSourceCode/" aria-label="Springæºç å®ç°"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->Springæºç å®ç°<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/frameDesignAndSourceCode/mybatisSourceCode/" aria-label="Mybatisæ¡†æ¶å®ç°"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->Mybatisæ¡†æ¶å®ç°<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ¶æ„ä¸“é¢˜"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>æ¶æ„ä¸“é¢˜<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/engineeringArchitectureDesign/" aria-label="MVCå’ŒDDD"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->MVCå’ŒDDD<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç²¾é€‰åšæ–‡"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>ç²¾é€‰åšæ–‡<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ä¸šåŠ¡çŸ¥è¯†</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/excellentBook/business/" aria-label="é‡‘èä¸šåŠ¡"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->é‡‘èä¸šåŠ¡<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">é¡¹ç›®ç»éªŒ</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/excellentBook/project/" aria-label="K8Séƒ¨ç½²é¡¹ç›®"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->K8Séƒ¨ç½²é¡¹ç›®<!----></a></li></ul></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/excellentBook/" aria-label="é€šç”¨æ•°æ®è®¾è®¡"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->é€šç”¨æ•°æ®è®¾è®¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/excellentBook/scence.html" aria-label="ä¸šåŠ¡åœºæ™¯è®¾è®¡"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->ä¸šåŠ¡åœºæ™¯è®¾è®¡<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/home.html" aria-label="åŸºç¡€å½’æ¡£"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->åŸºç¡€å½’æ¡£<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interview/k8s/" aria-label="é¢è¯•ç¯‡"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->é¢è¯•ç¯‡<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/KnowledgePlanet/" aria-label="çŸ¥è¯†æ˜Ÿçƒ"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->çŸ¥è¯†æ˜Ÿçƒ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/KnowledgePlanet/" aria-label="Bç«™"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->Bç«™<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/about/" aria-label="å…³äºæˆ‘"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->å…³äºæˆ‘<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/justdoitMr/blogs/" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸€ã€å¯¼è¯»</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">äºŒã€javaæ ¸å¿ƒ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸‰ã€Springç¯‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å››ã€å¤§æ•°æ®ç¯‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">äº”ã€äº‘åŸç”Ÿ</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">1ã€Docker</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/ContainerCloud/docker/act_one_docker_one.html" aria-label="1ã€DockeråŸºç¡€"><!--[--><span class="font-icon icon iconfont icon-file" style=""></span><!--]-->1ã€DockeråŸºç¡€<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/ContainerCloud/docker/act_two_docker_two.html" aria-label="2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´"><!--[--><span class="font-icon icon iconfont icon-file" style=""></span><!--]-->2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2ã€K8S</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">äº”ã€å‰ç«¯ç¯‡</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-file" style=""></span>2ã€Dockerå¤æ‚å®‰è£…è¯¦è¯´</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">bugcode</span></span><span property="author" content="bugcode"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-01-01T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 31 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT31M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2 clickable" role="navigation">DOCKER</span><span class="page-category-item color5 clickable" role="navigation">äº‘åŸç”Ÿ</span><!--]--><meta property="articleSection" content="DOCKER,äº‘åŸç”Ÿ"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color2 clickable" role="navigation">docker</span><span class="page-tag-item color5 clickable" role="navigation">äº‘åŸç”Ÿ</span><!--]--><meta property="keywords" content="docker,äº‘åŸç”Ÿ"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-å®‰è£…mysqlä¸»ä»å¤åˆ¶">1.1 å®‰è£…MySQLä¸»ä»å¤åˆ¶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-1-ä¸»ä»å¤åˆ¶åŸç†">1.1.1 ä¸»ä»å¤åˆ¶åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-2-ä¸»ä»æ­å»ºæ­¥éª¤">1.1.2 ä¸»ä»æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-å®‰è£…redisé›†ç¾¤-å¤§å‚é¢è¯•é¢˜ç¬¬4å­£-åˆ†å¸ƒå¼å­˜å‚¨æ¡ˆä¾‹çœŸé¢˜">1.2 å®‰è£…redisé›†ç¾¤(å¤§å‚é¢è¯•é¢˜ç¬¬4å­£-åˆ†å¸ƒå¼å­˜å‚¨æ¡ˆä¾‹çœŸé¢˜)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-é¢è¯•é¢˜">1.2.1 é¢è¯•é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-3ä¸»3ä»redisé›†ç¾¤æ‰©ç¼©å®¹é…ç½®æ¡ˆä¾‹æ¶æ„è¯´æ˜">1.2.2 3ä¸»3ä»redisé›†ç¾¤æ‰©ç¼©å®¹é…ç½®æ¡ˆä¾‹æ¶æ„è¯´æ˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-3-å¼€æ‰“æ­¥éª¤">1.2.3 å¼€æ‰“æ­¥éª¤</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-æ˜¯ä»€ä¹ˆ">2.1 æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ">2.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-1-dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†">2.2.1 Dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-2-dockeræ‰§è¡Œdockerfileçš„å¤§è‡´æµç¨‹">2.2.2 Dockeræ‰§è¡ŒDockerfileçš„å¤§è‡´æµç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-3-å°æ€»ç»“">2.2.3 å°æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤">2.3 DockerFileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-æ¡ˆä¾‹">2.4 æ¡ˆä¾‹</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-1-è‡ªå®šä¹‰é•œåƒmycentosjava8">2.4.1 è‡ªå®šä¹‰é•œåƒmycentosjava8</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-2-è™šæ‚¬é•œåƒ">2.4.2 è™šæ‚¬é•œåƒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-3-å®¶åº­ä½œä¸š-è‡ªå®šä¹‰é•œåƒmyubuntu">2.4.3 å®¶åº­ä½œä¸š-è‡ªå®šä¹‰é•œåƒmyubuntu</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-5-å°æ€»ç»“">2.5 å°æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-é€šè¿‡ideaæ–°å»ºä¸€ä¸ªæ™®é€šå¾®æœåŠ¡æ¨¡å—">3.1 é€šè¿‡IDEAæ–°å»ºä¸€ä¸ªæ™®é€šå¾®æœåŠ¡æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-é€šè¿‡dockerfileå‘å¸ƒå¾®æœåŠ¡éƒ¨ç½²åˆ°dockerå®¹å™¨">3.2 é€šè¿‡dockerfileå‘å¸ƒå¾®æœåŠ¡éƒ¨ç½²åˆ°dockerå®¹å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¸¸ç”¨åŸºæœ¬å‘½ä»¤">å¸¸ç”¨åŸºæœ¬å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#èƒ½å¹²å˜›">èƒ½å¹²å˜›</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç½‘ç»œæ¨¡å¼">ç½‘ç»œæ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#dockerå¹³å°æ¶æ„å›¾è§£">Dockerå¹³å°æ¶æ„å›¾è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ˜¯ä»€ä¹ˆ-1">æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å®‰è£…">å®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç™»é™†å¹¶æ¼”ç¤ºä»‹ç»å¸¸ç”¨æ“ä½œcase">ç™»é™†å¹¶æ¼”ç¤ºä»‹ç»å¸¸ç”¨æ“ä½œcase</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="_2-dockerå¤æ‚å®‰è£…è¯¦è¯´" tabindex="-1"><a class="header-anchor" href="#_2-dockerå¤æ‚å®‰è£…è¯¦è¯´"><span>2 Dockerå¤æ‚å®‰è£…è¯¦è¯´</span></a></h1><h2 id="_1-1-å®‰è£…mysqlä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#_1-1-å®‰è£…mysqlä¸»ä»å¤åˆ¶"><span>1.1 å®‰è£…MySQLä¸»ä»å¤åˆ¶</span></a></h2><h3 id="_1-1-1-ä¸»ä»å¤åˆ¶åŸç†" tabindex="-1"><a class="header-anchor" href="#_1-1-1-ä¸»ä»å¤åˆ¶åŸç†"><span>1.1.1 ä¸»ä»å¤åˆ¶åŸç†</span></a></h3><p><a href="https://blog.csdn.net/Guzarish/article/details/123244487" target="_blank" rel="noopener noreferrer">MySQLä¸»ä»å¤åˆ¶åŸç†_ç‰›å¥”çš„åšå®¢-CSDNåšå®¢</a></p><h3 id="_1-1-2-ä¸»ä»æ­å»ºæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_1-1-2-ä¸»ä»æ­å»ºæ­¥éª¤"><span>1.1.2 ä¸»ä»æ­å»ºæ­¥éª¤</span></a></h3><ol><li>æ–°å»ºä¸»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3307</li></ol><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run -p 3307:3306 --name mysql-master \</span></span>
<span class="line"><span>-v /mydata/mysql-master/log:/var/log/mysql \</span></span>
<span class="line"><span>-v /mydata/mysql-master/data:/var/lib/mysql \</span></span>
<span class="line"><span>-v /mydata/mysql-master/conf:/etc/mysql \</span></span>
<span class="line"><span>-e MYSQL_ROOT_PASSWORD=root  \</span></span>
<span class="line"><span>-d mysql:5.7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>è¿›å…¥/mydata/mysql-master/confç›®å½•ä¸‹æ–°å»ºmy.cnf</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>vim my.cnf</span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span>## è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€</span></span>
<span class="line"><span>server_id=101 </span></span>
<span class="line"><span>## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°</span></span>
<span class="line"><span>binlog-ignore-db=mysql  </span></span>
<span class="line"><span>## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½</span></span>
<span class="line"><span>log-bin=mall-mysql-bin  </span></span>
<span class="line"><span>## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰</span></span>
<span class="line"><span>binlog_cache_size=1M  </span></span>
<span class="line"><span>## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰</span></span>
<span class="line"><span>binlog_format=mixed  </span></span>
<span class="line"><span>## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚</span></span>
<span class="line"><span>expire_logs_days=7  </span></span>
<span class="line"><span>## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚</span></span>
<span class="line"><span>## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</span></span>
<span class="line"><span>slave_skip_errors=1062</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¿®æ”¹å®Œé…ç½®åé‡å¯masterå®ä¾‹</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker restart mysql-master</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li>è¿›å…¥mysql-masterå®¹å™¨</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker exec -it mysql-master /bin/bash</span></span>
<span class="line"><span>mysql -uroot -proot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>CREATE USER &#39;slave&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span>
<span class="line"><span>GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#39;slave&#39;@&#39;%&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>æ–°å»ºä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹3308</li></ol><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run -p 3308:3306 --name mysql-slave \</span></span>
<span class="line"><span>-v /mydata/mysql-slave/log:/var/log/mysql \</span></span>
<span class="line"><span>-v /mydata/mysql-slave/data:/var/lib/mysql \</span></span>
<span class="line"><span>-v /mydata/mysql-slave/conf:/etc/mysql \</span></span>
<span class="line"><span>-e MYSQL_ROOT_PASSWORD=root  \</span></span>
<span class="line"><span>-d mysql:5.7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>è¿›å…¥/mydata/mysql-slave/confç›®å½•ä¸‹æ–°å»ºmy.cnf</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>vim my.cnf</span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span>## è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€</span></span>
<span class="line"><span>server_id=102</span></span>
<span class="line"><span>## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°</span></span>
<span class="line"><span>binlog-ignore-db=mysql  </span></span>
<span class="line"><span>## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œä»¥å¤‡Slaveä½œä¸ºå…¶å®ƒæ•°æ®åº“å®ä¾‹çš„Masteræ—¶ä½¿ç”¨</span></span>
<span class="line"><span>log-bin=mall-mysql-slave1-bin  </span></span>
<span class="line"><span>## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰</span></span>
<span class="line"><span>binlog_cache_size=1M  </span></span>
<span class="line"><span>## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰</span></span>
<span class="line"><span>binlog_format=mixed  </span></span>
<span class="line"><span>## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚</span></span>
<span class="line"><span>expire_logs_days=7  </span></span>
<span class="line"><span>## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚</span></span>
<span class="line"><span>## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</span></span>
<span class="line"><span>slave_skip_errors=1062  </span></span>
<span class="line"><span>## relay_logé…ç½®ä¸­ç»§æ—¥å¿—</span></span>
<span class="line"><span>relay_log=mall-mysql-relay-bin  </span></span>
<span class="line"><span>## log_slave_updatesè¡¨ç¤ºslaveå°†å¤åˆ¶äº‹ä»¶å†™è¿›è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—</span></span>
<span class="line"><span>log_slave_updates=1  </span></span>
<span class="line"><span>## slaveè®¾ç½®ä¸ºåªè¯»ï¼ˆå…·æœ‰superæƒé™çš„ç”¨æˆ·é™¤å¤–ï¼‰</span></span>
<span class="line"><span>read_only=1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker restart mysql-slave</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li>åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>show master status;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li>è¿›å…¥mysql-slaveå®¹å™¨</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker exec -it mysql-slave /bin/bash</span></span>
<span class="line"><span>mysql -uroot -proot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> master_host=&#39;å®¿ä¸»æœºip&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> master_user=&#39;slave&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> master_password=&#39;123456&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">master_port</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3307,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> master_log_file</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;mall-mysql-bin.000001&#39;,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> master_log_pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">617,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> master_connect_retry</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995661799-39e995e2-73e0-4e7d-bc9d-59c1fa0b8e3c.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸»ä»å¤åˆ¶å‘½ä»¤å‚æ•°è¯´æ˜</p><p>master_hostï¼šä¸»æ•°æ®åº“çš„IPåœ°å€ï¼›</p><p>master_portï¼šä¸»æ•°æ®åº“çš„è¿è¡Œç«¯å£ï¼›</p><p>master_userï¼šåœ¨ä¸»æ•°æ®åº“åˆ›å»ºçš„ç”¨äºåŒæ­¥æ•°æ®çš„ç”¨æˆ·è´¦å·ï¼›</p><p>master_passwordï¼šåœ¨ä¸»æ•°æ®åº“åˆ›å»ºçš„ç”¨äºåŒæ­¥æ•°æ®çš„ç”¨æˆ·å¯†ç ï¼›</p><p>master_log_fileï¼šæŒ‡å®šä»æ•°æ®åº“è¦å¤åˆ¶æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ï¼Œé€šè¿‡æŸ¥çœ‹ä¸»æ•°æ®çš„çŠ¶æ€ï¼Œè·å–Fileå‚æ•°ï¼›</p><p>master_log_posï¼šæŒ‡å®šä»æ•°æ®åº“ä»å“ªä¸ªä½ç½®å¼€å§‹å¤åˆ¶æ•°æ®ï¼Œé€šè¿‡æŸ¥çœ‹ä¸»æ•°æ®çš„çŠ¶æ€ï¼Œè·å–Positionå‚æ•°ï¼›</p><p>master_connect_retryï¼šè¿æ¥å¤±è´¥é‡è¯•çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ã€‚</p><ol><li>åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>show slave status \G;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995728716-90fc0143-7a4d-465e-83c1-a17bad83823e.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>åœ¨ä»æ•°æ®åº“ä¸­å¼€å¯ä¸»ä»åŒæ­¥</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>start slave;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995798230-fbe9f08c-af5d-4e83-915d-62302a5ad1a1.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>æŸ¥çœ‹ä»æ•°æ®åº“çŠ¶æ€å‘ç°å·²ç»åŒæ­¥</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658995805394-60a39a9a-8be4-43b7-9489-84afd4ef0310.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><p>ä¸»ä»å¤åˆ¶æµ‹è¯•</p></li><li><ol><li>ä¸»æœºæ–°å»ºåº“-ä½¿ç”¨åº“-æ–°å»ºè¡¨-æ’å…¥æ•°æ®ï¼Œok</li></ol></li><li><p>ä»æœºä½¿ç”¨åº“-æŸ¥çœ‹è®°å½•ï¼Œok</p></li></ol><h2 id="_1-2-å®‰è£…redisé›†ç¾¤-å¤§å‚é¢è¯•é¢˜ç¬¬4å­£-åˆ†å¸ƒå¼å­˜å‚¨æ¡ˆä¾‹çœŸé¢˜" tabindex="-1"><a class="header-anchor" href="#_1-2-å®‰è£…redisé›†ç¾¤-å¤§å‚é¢è¯•é¢˜ç¬¬4å­£-åˆ†å¸ƒå¼å­˜å‚¨æ¡ˆä¾‹çœŸé¢˜"><span>1.2 å®‰è£…redisé›†ç¾¤(å¤§å‚é¢è¯•é¢˜ç¬¬4å­£-åˆ†å¸ƒå¼å­˜å‚¨æ¡ˆä¾‹çœŸé¢˜)</span></a></h2><p>cluster(é›†ç¾¤)æ¨¡å¼-dockerç‰ˆ</p><p>å“ˆå¸Œæ§½åˆ†åŒºè¿›è¡Œäº¿çº§æ•°æ®å­˜å‚¨</p><h3 id="_1-2-1-é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-2-1-é¢è¯•é¢˜"><span>1.2.1 é¢è¯•é¢˜</span></a></h3><p>1~2äº¿æ¡æ•°æ®éœ€è¦ç¼“å­˜ï¼Œè¯·é—®å¦‚ä½•è®¾è®¡è¿™ä¸ªå­˜å‚¨æ¡ˆä¾‹ï¼Ÿ</p><p>å›ç­”ï¼šå•æœºå•å°100%ä¸å¯èƒ½ï¼Œè‚¯å®šæ˜¯åˆ†å¸ƒå¼å­˜å‚¨ï¼Œç”¨rediså¦‚ä½•è½åœ°ï¼Ÿ</p><p>ä¸Šè¿°é—®é¢˜é˜¿é‡ŒP6~P7å·¥ç¨‹æ¡ˆä¾‹å’Œåœºæ™¯è®¾è®¡ç±»å¿…è€ƒé¢˜ç›®ï¼Œ ä¸€èˆ¬ä¸šç•Œæœ‰3ç§è§£å†³æ–¹æ¡ˆ</p><ol><li>å“ˆå¸Œå–ä½™åˆ†åŒº</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658996785793-2ca8867b-2254-45ee-8bc7-8f566d737db2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>2äº¿æ¡è®°å½•å°±æ˜¯2äº¿ä¸ªk,vï¼Œæˆ‘ä»¬å•æœºä¸è¡Œå¿…é¡»è¦åˆ†å¸ƒå¼å¤šæœºï¼Œå‡è®¾æœ‰3å°æœºå™¨æ„æˆä¸€ä¸ªé›†ç¾¤ï¼Œç”¨æˆ·æ¯æ¬¡è¯»å†™æ“ä½œéƒ½æ˜¯æ ¹æ®å…¬å¼ï¼š</p><p>hash(key) % Nä¸ªæœºå™¨å°æ•°ï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œç”¨æ¥å†³å®šæ•°æ®æ˜ å°„åˆ°å“ªä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><p>ä¼˜ç‚¹ï¼š</p><p>ç®€å•ç²—æš´ï¼Œç›´æ¥æœ‰æ•ˆï¼Œåªéœ€è¦é¢„ä¼°å¥½æ•°æ®è§„åˆ’å¥½èŠ‚ç‚¹ï¼Œä¾‹å¦‚3å°ã€8å°ã€10å°ï¼Œå°±èƒ½ä¿è¯ä¸€æ®µæ—¶é—´çš„æ•°æ®æ”¯æ’‘ã€‚ä½¿ç”¨Hashç®—æ³•è®©å›ºå®šçš„ä¸€éƒ¨åˆ†è¯·æ±‚è½åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ¯å°æœåŠ¡å™¨å›ºå®šå¤„ç†ä¸€éƒ¨åˆ†è¯·æ±‚ï¼ˆå¹¶ç»´æŠ¤è¿™äº›è¯·æ±‚çš„ä¿¡æ¯ï¼‰ï¼Œèµ·åˆ°è´Ÿè½½å‡è¡¡+åˆ†è€Œæ²»ä¹‹çš„ä½œç”¨ã€‚</p><p>ç¼ºç‚¹ï¼š</p><p>åŸæ¥è§„åˆ’å¥½çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œæ‰©å®¹æˆ–è€…ç¼©å®¹å°±æ¯”è¾ƒéº»çƒ¦äº†é¢ï¼Œä¸ç®¡æ‰©ç¼©ï¼Œæ¯æ¬¡æ•°æ®å˜åŠ¨å¯¼è‡´èŠ‚ç‚¹æœ‰å˜åŠ¨ï¼Œæ˜ å°„å…³ç³»éœ€è¦é‡æ–°è¿›è¡Œè®¡ç®—ï¼Œåœ¨æœåŠ¡å™¨ä¸ªæ•°å›ºå®šä¸å˜æ—¶æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœéœ€è¦å¼¹æ€§æ‰©å®¹æˆ–æ•…éšœåœæœºçš„æƒ…å†µä¸‹ï¼ŒåŸæ¥çš„å–æ¨¡å…¬å¼å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼šHash(key)/3ä¼šå˜æˆHash(key) /?ã€‚æ­¤æ—¶åœ°å€ç»è¿‡å–ä½™è¿ç®—çš„ç»“æœå°†å‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œæ ¹æ®å…¬å¼è·å–çš„æœåŠ¡å™¨ä¹Ÿä¼šå˜å¾—ä¸å¯æ§ã€‚</p><p>æŸä¸ªredisæœºå™¨å®•æœºäº†ï¼Œç”±äºå°æ•°æ•°é‡å˜åŒ–ï¼Œä¼šå¯¼è‡´hashå–ä½™å…¨éƒ¨æ•°æ®é‡æ–°æ´—ç‰Œã€‚</p><ol><li><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åˆ†åŒº</p></li><li><ol><li>æ˜¯ä»€ä¹ˆ</li></ol></li></ol><p>ä¸€è‡´æ€§Hashç®—æ³•èƒŒæ™¯</p><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨1997å¹´ç”±éº»çœç†å·¥å­¦é™¢ä¸­æå‡ºçš„ï¼Œè®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†è§£å†³åˆ†å¸ƒå¼ç¼“å­˜æ•°æ®å˜åŠ¨å’Œæ˜ å°„é—®é¢˜ï¼ŒæŸä¸ªæœºå™¨å®•æœºäº†ï¼Œåˆ†æ¯æ•°é‡æ”¹å˜äº†ï¼Œè‡ªç„¶å–ä½™æ•°ä¸OKäº†ã€‚</p><ol><li><ol><li>èƒ½å¹²å˜›</li></ol></li></ol><p>æå‡ºä¸€è‡´æ€§Hashè§£å†³æ–¹æ¡ˆã€‚ ç›®çš„æ˜¯å½“æœåŠ¡å™¨ä¸ªæ•°å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œ å°½é‡å‡å°‘å½±å“å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ˜ å°„å…³ç³»</p><ol><li><ol><li>3å¤§æ­¥éª¤</li></ol></li><li><ol><li><ol><li>ç®—æ³•æ„å»ºä¸€è‡´æ€§å“ˆå¸Œç¯</li></ol></li></ol></li></ol><p>ä¸€è‡´æ€§å“ˆå¸Œç¯</p><p>â€‹ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¿…ç„¶æœ‰ä¸ªhashå‡½æ•°å¹¶æŒ‰ç…§ç®—æ³•äº§ç”Ÿhashå€¼ï¼Œè¿™ä¸ªç®—æ³•çš„æ‰€æœ‰å¯èƒ½å“ˆå¸Œå€¼ä¼šæ„æˆä¸€ä¸ªå…¨é‡é›†ï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æˆä¸ºä¸€ä¸ªhashç©ºé—´[0,2^32-1]ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªçº¿æ€§ç©ºé—´ï¼Œä½†æ˜¯åœ¨ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é€‚å½“çš„é€»è¾‘æ§åˆ¶å°†å®ƒé¦–å°¾ç›¸è¿(0 = 2^32),è¿™æ ·è®©å®ƒé€»è¾‘ä¸Šå½¢æˆäº†ä¸€ä¸ªç¯å½¢ç©ºé—´ã€‚</p><p>â€‹ å®ƒä¹Ÿæ˜¯æŒ‰ç…§ä½¿ç”¨å–æ¨¡çš„æ–¹æ³•ï¼Œå‰é¢ç¬”è®°ä»‹ç»çš„èŠ‚ç‚¹å–æ¨¡æ³•æ˜¯å¯¹èŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ï¼‰çš„æ•°é‡è¿›è¡Œå–æ¨¡ã€‚è€Œä¸€è‡´æ€§Hashç®—æ³•æ˜¯å¯¹2^32å–æ¨¡ï¼Œç®€å•æ¥è¯´ï¼Œä¸€è‡´æ€§Hashç®—æ³•å°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼Œå¦‚å‡è®¾æŸå“ˆå¸Œå‡½æ•°Hçš„å€¼ç©ºé—´ä¸º0-2^32-1ï¼ˆå³å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ª32ä½æ— ç¬¦å·æ•´å½¢ï¼‰ï¼Œæ•´ä¸ªå“ˆå¸Œç¯å¦‚ä¸‹å›¾ï¼šæ•´ä¸ªç©ºé—´æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡ï¼Œåœ†ç¯çš„æ­£ä¸Šæ–¹çš„ç‚¹ä»£è¡¨0ï¼Œ0ç‚¹å³ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ2ã€3ã€4ã€â€¦â€¦ç›´åˆ°2^32-1ï¼Œä¹Ÿå°±æ˜¯è¯´0ç‚¹å·¦ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨2^32-1ï¼Œ 0å’Œ2^32-1åœ¨é›¶ç‚¹ä¸­æ–¹å‘é‡åˆï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç”±2^32ä¸ªç‚¹ç»„æˆçš„åœ†ç¯ç§°ä¸ºHashç¯ã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999862145-25f18b54-2e15-47f3-a873-a5d44a16f866.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li><ol><li>æœåŠ¡å™¨IPèŠ‚ç‚¹æ˜ å°„</li></ol></li></ol></li></ol><p>èŠ‚ç‚¹æ˜ å°„</p><p>å°†é›†ç¾¤ä¸­å„ä¸ªIPèŠ‚ç‚¹æ˜ å°„åˆ°ç¯ä¸Šçš„æŸä¸€ä¸ªä½ç½®ã€‚</p><p>å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œå…·ä½“å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„IPæˆ–ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œï¼Œè¿™æ ·æ¯å°æœºå™¨å°±èƒ½ç¡®å®šå…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®ã€‚å‡å¦‚4ä¸ªèŠ‚ç‚¹NodeAã€Bã€Cã€Dï¼Œç»è¿‡IPåœ°å€çš„å“ˆå¸Œå‡½æ•°è®¡ç®—(hash(ip))ï¼Œä½¿ç”¨IPåœ°å€å“ˆå¸Œååœ¨ç¯ç©ºé—´çš„ä½ç½®å¦‚ä¸‹ï¼š</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999891472-39767eb6-5396-4b43-9cfb-71103e0758ec.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li><ol><li>keyè½åˆ°æœåŠ¡å™¨çš„è½é”®è§„åˆ™</li></ol></li></ol></li></ol><p>å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸€ä¸ªkvé”®å€¼å¯¹æ—¶ï¼Œé¦–å…ˆè®¡ç®—keyçš„hashå€¼ï¼Œhash(key)ï¼Œå°†è¿™ä¸ªkeyä½¿ç”¨ç›¸åŒçš„å‡½æ•°Hashè®¡ç®—å‡ºå“ˆå¸Œå€¼å¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ï¼Œå¹¶å°†è¯¥é”®å€¼å¯¹å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¸Šã€‚</p><p>å¦‚æˆ‘ä»¬æœ‰Object Aã€Object Bã€Object Cã€Object Då››ä¸ªæ•°æ®å¯¹è±¡ï¼Œç»è¿‡å“ˆå¸Œè®¡ç®—åï¼Œåœ¨ç¯ç©ºé—´ä¸Šçš„ä½ç½®å¦‚ä¸‹ï¼šæ ¹æ®ä¸€è‡´æ€§Hashç®—æ³•ï¼Œæ•°æ®Aä¼šè¢«å®šä¸ºåˆ°Node Aä¸Šï¼ŒBè¢«å®šä¸ºåˆ°Node Bä¸Šï¼ŒCè¢«å®šä¸ºåˆ°Node Cä¸Šï¼ŒDè¢«å®šä¸ºåˆ°Node Dä¸Šã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999908647-d6826cc9-9435-4701-8e42-9aaf09cee0be.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li>ä¼˜ç‚¹</li></ol></li><li><ol><li><ol><li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„å®¹é”™æ€§</li></ol></li></ol></li></ol><p>å®¹é”™æ€§</p><p>å‡è®¾Node Cå®•æœºï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å¯¹è±¡Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Cå¯¹è±¡è¢«é‡å®šä½åˆ°Node Dã€‚ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§Hashç®—æ³•ä¸­ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´æ•°æ®ï¼Œå…¶å®ƒä¸ä¼šå—åˆ°å½±å“ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯CæŒ‚äº†ï¼Œå—åˆ°å½±å“çš„åªæ˜¯Bã€Cä¹‹é—´çš„æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®ä¼šè½¬ç§»åˆ°Dè¿›è¡Œå­˜å‚¨ã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1658999941543-94276993-0b80-4c0d-8804-662831456bc2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li><ol><li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„æ‰©å±•æ€§</li></ol></li></ol></li></ol><p>æ•°æ®é‡å¢åŠ äº†ï¼Œéœ€è¦å¢åŠ ä¸€å°èŠ‚ç‚¹NodeXï¼ŒXçš„ä½ç½®åœ¨Aå’ŒBä¹‹é—´ï¼Œé‚£æ”¶åˆ°å½±å“çš„ä¹Ÿå°±æ˜¯Aåˆ°Xä¹‹é—´çš„æ•°æ®ï¼Œé‡æ–°æŠŠAåˆ°Xçš„æ•°æ®å½•å…¥åˆ°Xä¸Šå³å¯ï¼Œ</p><p>ä¸ä¼šå¯¼è‡´hashå–ä½™å…¨éƒ¨æ•°æ®é‡æ–°æ´—ç‰Œã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000035920-385ef89f-50cc-497a-9954-b91df3b4e84a.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li>ç¼ºç‚¹</li></ol></li></ol><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„æ•°æ®å€¾æ–œé—®é¢˜</p><p>Hashç¯çš„æ•°æ®å€¾æ–œé—®é¢˜</p><p>ä¸€è‡´æ€§Hashç®—æ³•åœ¨æœåŠ¡èŠ‚ç‚¹å¤ªå°‘æ—¶ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€è€Œé€ æˆæ•°æ®å€¾æ–œï¼ˆè¢«ç¼“å­˜çš„å¯¹è±¡å¤§éƒ¨åˆ†é›†ä¸­ç¼“å­˜åœ¨æŸä¸€å°æœåŠ¡å™¨ä¸Šï¼‰é—®é¢˜ï¼Œ</p><p>ä¾‹å¦‚ç³»ç»Ÿä¸­åªæœ‰ä¸¤å°æœåŠ¡å™¨ï¼š</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000055531-fe1191aa-34b3-46d8-9981-b7ff2ad7f2a7.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><ol><li>å°æ€»ç»“</li></ol></li></ol><p>ä¸ºäº†åœ¨èŠ‚ç‚¹æ•°ç›®å‘ç”Ÿæ”¹å˜æ—¶å°½å¯èƒ½å°‘çš„è¿ç§»æ•°æ®</p><p>å°†æ‰€æœ‰çš„å­˜å‚¨èŠ‚ç‚¹æ’åˆ—åœ¨æ”¶å°¾ç›¸æ¥çš„Hashç¯ä¸Šï¼Œæ¯ä¸ªkeyåœ¨è®¡ç®—Hashåä¼šé¡ºæ—¶é’ˆæ‰¾åˆ°ä¸´è¿‘çš„å­˜å‚¨èŠ‚ç‚¹å­˜æ”¾ã€‚</p><p>è€Œå½“æœ‰èŠ‚ç‚¹åŠ å…¥æˆ–é€€å‡ºæ—¶ä»…å½±å“è¯¥èŠ‚ç‚¹åœ¨Hashç¯ä¸Šé¡ºæ—¶é’ˆç›¸é‚»çš„åç»­èŠ‚ç‚¹ã€‚</p><p>ä¼˜ç‚¹</p><p>åŠ å…¥å’Œåˆ é™¤èŠ‚ç‚¹åªå½±å“å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘çš„ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¯¹å…¶ä»–èŠ‚ç‚¹æ— å½±å“ã€‚</p><p>ç¼ºç‚¹</p><p>æ•°æ®çš„åˆ†å¸ƒå’ŒèŠ‚ç‚¹çš„ä½ç½®æœ‰å…³ï¼Œå› ä¸ºè¿™äº›èŠ‚ç‚¹ä¸æ˜¯å‡åŒ€çš„åˆ†å¸ƒåœ¨å“ˆå¸Œç¯ä¸Šçš„ï¼Œæ‰€ä»¥æ•°æ®åœ¨è¿›è¡Œå­˜å‚¨æ—¶è¾¾ä¸åˆ°å‡åŒ€åˆ†å¸ƒçš„æ•ˆæœã€‚</p><ol><li><p>å“ˆå¸Œæ§½åˆ†åŒº</p></li><li><ol><li>æ˜¯ä»€ä¹ˆ</li></ol></li></ol><p>1 ä¸ºä»€ä¹ˆå‡ºç°</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000479815-61ec964c-ad1b-4a75-a379-a5aa680199f1.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å“ˆå¸Œæ§½å®è´¨å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„[0,2^14 -1]å½¢æˆhash slotç©ºé—´ã€‚</p><p>2 èƒ½å¹²ä»€ä¹ˆ</p><p>è§£å†³å‡åŒ€åˆ†é…çš„é—®é¢˜ï¼Œåœ¨æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´åˆåŠ å…¥äº†ä¸€å±‚ï¼ŒæŠŠè¿™å±‚ç§°ä¸ºå“ˆå¸Œæ§½ï¼ˆslotï¼‰ï¼Œç”¨äºç®¡ç†æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œç°åœ¨å°±ç›¸å½“äºèŠ‚ç‚¹ä¸Šæ”¾çš„æ˜¯æ§½ï¼Œæ§½é‡Œæ”¾çš„æ˜¯æ•°æ®ã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000487455-b7174e19-35ee-472e-8884-2fad95f1edbc.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ§½è§£å†³çš„æ˜¯ç²’åº¦é—®é¢˜ï¼Œç›¸å½“äºæŠŠç²’åº¦å˜å¤§äº†ï¼Œè¿™æ ·ä¾¿äºæ•°æ®ç§»åŠ¨ã€‚</p><p>å“ˆå¸Œè§£å†³çš„æ˜¯æ˜ å°„é—®é¢˜ï¼Œä½¿ç”¨keyçš„å“ˆå¸Œå€¼æ¥è®¡ç®—æ‰€åœ¨çš„æ§½ï¼Œä¾¿äºæ•°æ®åˆ†é…ã€‚</p><p>3 å¤šå°‘ä¸ªhashæ§½</p><p>ä¸€ä¸ªé›†ç¾¤åªèƒ½æœ‰16384ä¸ªæ§½ï¼Œç¼–å·0-16383ï¼ˆ0-2^14-1ï¼‰ã€‚è¿™äº›æ§½ä¼šåˆ†é…ç»™é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»èŠ‚ç‚¹ï¼Œåˆ†é…ç­–ç•¥æ²¡æœ‰è¦æ±‚ã€‚å¯ä»¥æŒ‡å®šå“ªäº›ç¼–å·çš„æ§½åˆ†é…ç»™å“ªä¸ªä¸»èŠ‚ç‚¹ã€‚é›†ç¾¤ä¼šè®°å½•èŠ‚ç‚¹å’Œæ§½çš„å¯¹åº”å…³ç³»ã€‚è§£å†³äº†èŠ‚ç‚¹å’Œæ§½çš„å…³ç³»åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å¯¹keyæ±‚å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹16384å–ä½™ï¼Œä½™æ•°æ˜¯å‡ keyå°±è½å…¥å¯¹åº”çš„æ§½é‡Œã€‚slot = CRC16(key) % 16384ã€‚ä»¥æ§½ä¸ºå•ä½ç§»åŠ¨æ•°æ®ï¼Œå› ä¸ºæ§½çš„æ•°ç›®æ˜¯å›ºå®šçš„ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œè¿™æ ·æ•°æ®ç§»åŠ¨é—®é¢˜å°±è§£å†³äº†ã€‚</p><ol><li><ol><li>å“ˆå¸Œæ§½è®¡ç®—</li></ol></li></ol><p>Redis é›†ç¾¤ä¸­å†…ç½®äº† 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œredis ä¼šæ ¹æ®èŠ‚ç‚¹æ•°é‡å¤§è‡´å‡ç­‰çš„å°†å“ˆå¸Œæ§½æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚å½“éœ€è¦åœ¨ Redis é›†ç¾¤ä¸­æ”¾ç½®ä¸€ä¸ª key-valueæ—¶ï¼Œredis å…ˆå¯¹ key ä½¿ç”¨ crc16 ç®—æ³•ç®—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹ 16384 æ±‚ä½™æ•°ï¼Œè¿™æ ·æ¯ä¸ª key éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨ 0-16383 ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚å¦‚ä¸‹ä»£ç ï¼Œkeyä¹‹A ã€Båœ¨Node2ï¼Œ keyä¹‹Cè½åœ¨Node3ä¸Š</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000531546-75739be6-1aee-4165-9dfb-6ac727deddf6.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1659000521473-2a5a3350-1bd4-4394-b4dd-496f4e024034.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_1-2-2-3ä¸»3ä»redisé›†ç¾¤æ‰©ç¼©å®¹é…ç½®æ¡ˆä¾‹æ¶æ„è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#_1-2-2-3ä¸»3ä»redisé›†ç¾¤æ‰©ç¼©å®¹é…ç½®æ¡ˆä¾‹æ¶æ„è¯´æ˜"><span>1.2.2 3ä¸»3ä»redisé›†ç¾¤æ‰©ç¼©å®¹é…ç½®æ¡ˆä¾‹æ¶æ„è¯´æ˜</span></a></h3><p>è§è‡ªå·±çš„processonç¬”è®°</p><h3 id="_1-2-3-å¼€æ‰“æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_1-2-3-å¼€æ‰“æ­¥éª¤"><span>1.2.3 å¼€æ‰“æ­¥éª¤</span></a></h3><p>/todo</p><p>3ä¸»3ä»redisé›†ç¾¤é…ç½®</p><p>å…³é—­é˜²ç«å¢™+å¯åŠ¨dockeråå°æœåŠ¡</p><p>systemctl start docker</p><p>æ–°å»º6ä¸ªdockerå®¹å™¨rediså®ä¾‹</p><p>å‘½ä»¤åˆ†æ­¥è§£é‡Š</p><p>docker run</p><p>åˆ›å»ºå¹¶è¿è¡Œdockerå®¹å™¨å®ä¾‹</p><p>--name redis-node-6</p><p>å®¹å™¨åå­—</p><p>--net host</p><p>ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ï¼Œé»˜è®¤</p><p>--privileged=true</p><p>è·å–å®¿ä¸»æœºrootç”¨æˆ·æƒé™</p><p>-v /data/redis/share/redis-node-6:/data</p><p>å®¹å™¨å·ï¼Œå®¿ä¸»æœºåœ°å€:dockerå†…éƒ¨åœ°å€</p><p>redis:6.0.8</p><p>redisé•œåƒå’Œç‰ˆæœ¬å·</p><p>--cluster-enabled yes</p><p>å¼€å¯redisé›†ç¾¤</p><p>--appendonly yes</p><p>å¼€å¯æŒä¹…åŒ–</p><p>--port 6386</p><p>redisç«¯å£å·</p><p>è¿›å…¥å®¹å™¨redis-node-1å¹¶ä¸º6å°æœºå™¨æ„å»ºé›†ç¾¤å…³ç³»</p><p>è¿›å…¥å®¹å™¨</p><p>docker exec -it redis-node-1 /bin/bash</p><p>æ„å»ºä¸»ä»å…³ç³»</p><p>ä¸€åˆ‡OKçš„è¯ï¼Œ3ä¸»3ä»æå®š</p><p>é“¾æ¥è¿›å…¥6381ä½œä¸ºåˆ‡å…¥ç‚¹ï¼ŒæŸ¥çœ‹é›†ç¾¤çŠ¶æ€</p><p>é“¾æ¥è¿›å…¥6381ä½œä¸ºåˆ‡å…¥ç‚¹ï¼ŒæŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</p><p>cluster info</p><p>cluster nodes</p><p>ä¸»ä»å®¹é”™åˆ‡æ¢è¿ç§»æ¡ˆä¾‹</p><p>æ•°æ®è¯»å†™å­˜å‚¨</p><p>å¯åŠ¨6æœºæ„æˆçš„é›†ç¾¤å¹¶é€šè¿‡execè¿›å…¥</p><p>å¯¹6381æ–°å¢ä¸¤ä¸ªkey</p><p>é˜²æ­¢è·¯ç”±å¤±æ•ˆåŠ å‚æ•°-cå¹¶æ–°å¢ä¸¤ä¸ªkey</p><p>æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</p><p>å®¹é”™åˆ‡æ¢è¿ç§»</p><p>ä¸»6381å’Œä»æœºåˆ‡æ¢ï¼Œå…ˆåœæ­¢ä¸»æœº6381</p><p>6381ä¸»æœºåœäº†ï¼Œå¯¹åº”çš„çœŸå®ä»æœºä¸Šä½</p><p>6381ä½œä¸º1å·ä¸»æœºåˆ†é…çš„ä»æœºä»¥å®é™…æƒ…å†µä¸ºå‡†ï¼Œå…·ä½“æ˜¯å‡ å·æœºå™¨å°±æ˜¯å‡ å·</p><p>å†æ¬¡æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</p><p>å…ˆè¿˜åŸä¹‹å‰çš„3ä¸»3ä»</p><p>å…ˆå¯6381</p><p>docker start redis-node-1</p><p>å†åœ6385</p><p>docker stop redis-node-5</p><p>å†å¯6385</p><p>docker start redis-node-5</p><p>ä¸»ä»æœºå™¨åˆ†é…æƒ…å†µä»¥å®é™…æƒ…å†µä¸ºå‡†</p><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</p><p>redis-cli --cluster check è‡ªå·±IP:6381</p><p>ä¸»ä»æ‰©å®¹æ¡ˆä¾‹</p><p>æ–°å»º6387ã€6388ä¸¤ä¸ªèŠ‚ç‚¹+æ–°å»ºåå¯åŠ¨+æŸ¥çœ‹æ˜¯å¦8èŠ‚ç‚¹</p><p>è¿›å…¥6387å®¹å™¨å®ä¾‹å†…éƒ¨</p><p>docker exec -it redis-node-7 /bin/bash</p><p>å°†æ–°å¢çš„6387èŠ‚ç‚¹(ç©ºæ§½å·)ä½œä¸ºmasterèŠ‚ç‚¹åŠ å…¥åŸé›†ç¾¤</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µç¬¬1æ¬¡</p><p>é‡æ–°åˆ†æ´¾æ§½å·</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µç¬¬2æ¬¡</p><p>æ§½å·åˆ†æ´¾è¯´æ˜</p><p>ä¸ºä¸»èŠ‚ç‚¹6387åˆ†é…ä»èŠ‚ç‚¹6388</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µç¬¬3æ¬¡</p><p>ä¸»ä»ç¼©å®¹æ¡ˆä¾‹</p><p>ç›®çš„ï¼š6387å’Œ6388ä¸‹çº¿</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µ1è·å¾—6388çš„èŠ‚ç‚¹ID</p><p>å°†6388åˆ é™¤ ä»é›†ç¾¤ä¸­å°†4å·ä»èŠ‚ç‚¹6388åˆ é™¤</p><p>å°†6387çš„æ§½å·æ¸…ç©ºï¼Œé‡æ–°åˆ†é…ï¼Œæœ¬ä¾‹å°†æ¸…å‡ºæ¥çš„æ§½å·éƒ½ç»™6381</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µç¬¬äºŒæ¬¡</p><p>å°†6387åˆ é™¤</p><p>æ£€æŸ¥é›†ç¾¤æƒ…å†µç¬¬ä¸‰æ¬¡</p><h1 id="_2-dockerfileè§£æ" tabindex="-1"><a class="header-anchor" href="#_2-dockerfileè§£æ"><span>2 DockerFileè§£æ</span></a></h1><h2 id="_2-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2-1-æ˜¯ä»€ä¹ˆ"><span>2.1 æ˜¯ä»€ä¹ˆ</span></a></h2><p>Dockerfileæ˜¯ç”¨æ¥æ„å»ºDockeré•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ã€‚</p><p><strong>æ¦‚è¿°</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660012864805-18937b87-0167-4c81-9d75-f485a61c5304.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>å®˜ç½‘</strong></p><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/builder/</a></p><p><strong>æ„å»ºä¸‰æ­¥éª¤</strong></p><ol><li>ç¼–å†™Dockerfileæ–‡ä»¶</li><li>docker build å‘½ä»¤æ„å»ºé•œåƒ</li><li>docker run é•œåƒ è¿è¡Œå®¹å™¨å®ä¾‹</li></ol><h2 id="_2-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ" tabindex="-1"><a class="header-anchor" href="#_2-2-dockerfileæ„å»ºè¿‡ç¨‹è§£æ"><span>2.2 DockerFileæ„å»ºè¿‡ç¨‹è§£æ</span></a></h2><h3 id="_2-2-1-dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#_2-2-1-dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†"><span>2.2.1 Dockerfileå†…å®¹åŸºç¡€çŸ¥è¯†</span></a></h3><ol><li>æ¯æ¡ä¿ç•™å­—æŒ‡ä»¤éƒ½å¿…é¡»ä¸ºå¤§å†™å­—æ¯ä¸”åé¢è¦è·Ÿéšè‡³å°‘ä¸€ä¸ªå‚æ•°</li><li>æŒ‡ä»¤æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ï¼Œé¡ºåºæ‰§è¡Œ</li><li>#è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚å¹¶å¯¹é•œåƒè¿›è¡Œæäº¤</li></ol><h3 id="_2-2-2-dockeræ‰§è¡Œdockerfileçš„å¤§è‡´æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-2-2-dockeræ‰§è¡Œdockerfileçš„å¤§è‡´æµç¨‹"><span>2.2.2 Dockeræ‰§è¡ŒDockerfileçš„å¤§è‡´æµç¨‹</span></a></h3><ol><li>dockerä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li><li>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤å¹¶å¯¹å®¹å™¨ä½œå‡ºä¿®æ”¹</li><li>æ‰§è¡Œç±»ä¼¼docker commitçš„æ“ä½œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</li><li>dockerå†åŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨</li><li>æ‰§è¡Œdockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ç›´åˆ°æ‰€æœ‰æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæˆ</li></ol><h3 id="_2-2-3-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_2-2-3-å°æ€»ç»“"><span>2.2.3 å°æ€»ç»“</span></a></h3><p>ä»åº”ç”¨è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒDockerfileã€Dockeré•œåƒä¸Dockerå®¹å™¨åˆ†åˆ«ä»£è¡¨è½¯ä»¶çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µï¼Œ</p><ul><li>Dockerfileæ˜¯è½¯ä»¶çš„åŸææ–™</li><li>Dockeré•œåƒæ˜¯è½¯ä»¶çš„äº¤ä»˜å“</li><li>Dockerå®¹å™¨åˆ™å¯ä»¥è®¤ä¸ºæ˜¯è½¯ä»¶é•œåƒçš„è¿è¡Œæ€ï¼Œä¹Ÿå³ä¾ç…§é•œåƒè¿è¡Œçš„å®¹å™¨å®ä¾‹</li></ul><p>Dockerfileé¢å‘å¼€å‘ï¼ŒDockeré•œåƒæˆä¸ºäº¤ä»˜æ ‡å‡†ï¼ŒDockerå®¹å™¨åˆ™æ¶‰åŠéƒ¨ç½²ä¸è¿ç»´ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯ï¼ŒåˆåŠ›å……å½“Dockerä½“ç³»çš„åŸºçŸ³ã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013094449-a1af09f8-c696-4f09-a5de-6ee1844fb424.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>Dockerfileï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªDockerfileï¼ŒDockerfileå®šä¹‰äº†è¿›ç¨‹éœ€è¦çš„ä¸€åˆ‡ä¸œè¥¿ã€‚Dockerfileæ¶‰åŠçš„å†…å®¹åŒ…æ‹¬æ‰§è¡Œä»£ç æˆ–è€…æ˜¯æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€ä¾èµ–åŒ…ã€è¿è¡Œæ—¶ç¯å¢ƒã€åŠ¨æ€é“¾æ¥åº“ã€æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆã€æœåŠ¡è¿›ç¨‹å’Œå†…æ ¸è¿›ç¨‹(å½“åº”ç”¨è¿›ç¨‹éœ€è¦å’Œç³»ç»ŸæœåŠ¡å’Œå†…æ ¸è¿›ç¨‹æ‰“äº¤é“ï¼Œè¿™æ—¶éœ€è¦è€ƒè™‘å¦‚ä½•è®¾è®¡namespaceçš„æƒé™æ§åˆ¶)ç­‰ç­‰;</li><li>Dockeré•œåƒï¼Œåœ¨ç”¨Dockerfileå®šä¹‰ä¸€ä¸ªæ–‡ä»¶ä¹‹åï¼Œdocker buildæ—¶ä¼šäº§ç”Ÿä¸€ä¸ªDockeré•œåƒï¼Œå½“è¿è¡Œ Dockeré•œåƒæ—¶ä¼šçœŸæ­£å¼€å§‹æä¾›æœåŠ¡;</li><li>Dockerå®¹å™¨ï¼Œå®¹å™¨æ˜¯ç›´æ¥æä¾›æœåŠ¡çš„ã€‚</li></ol><h2 id="_2-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#_2-3-dockerfileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤"><span>2.3 DockerFileå¸¸ç”¨ä¿ç•™å­—æŒ‡ä»¤</span></a></h2><p><strong>å‚è€ƒtomcat8çš„dockerfileå…¥é—¨</strong></p><p><a href="https://github.com/docker-library/tomcat" target="_blank" rel="noopener noreferrer">https://github.com/docker-library/tomcat</a></p><p><strong>FROM</strong></p><p>åŸºç¡€é•œåƒï¼Œå½“å‰æ–°é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒçš„ï¼ŒæŒ‡å®šä¸€ä¸ªå·²ç»å­˜åœ¨çš„é•œåƒä½œä¸ºæ¨¡æ¿ï¼Œç¬¬ä¸€æ¡å¿…é¡»æ˜¯from</p><p><strong>MAINTAINER</strong></p><p>é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</p><p><strong>RUN</strong></p><p>å®¹å™¨æ„å»ºæ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤</p><p>ä¸¤ç§æ ¼å¼</p><ol><li>shellæ ¼å¼</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013238837-86e640c5-49ef-424a-81d0-bc702f35389b.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>RUN yum -y install vim</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li>execæ ¼å¼</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013257101-5b63a752-99eb-4678-b2de-a527717ccbcc.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>RUNæ˜¯åœ¨ docker buildæ—¶è¿è¡Œ</p><p><strong>EXPOSE</strong></p><p>å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²å‡ºçš„ç«¯å£</p><p><strong>WORKDIR</strong></p><p>æŒ‡å®šåœ¨åˆ›å»ºå®¹å™¨åï¼Œç»ˆç«¯é»˜è®¤ç™»é™†çš„è¿›æ¥å·¥ä½œç›®å½•ï¼Œä¸€ä¸ªè½è„šç‚¹</p><p><strong>USER</strong></p><p>æŒ‡å®šè¯¥é•œåƒä»¥ä»€ä¹ˆæ ·çš„ç”¨æˆ·å»æ‰§è¡Œï¼Œå¦‚æœéƒ½ä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯root</p><p><strong>ENV</strong></p><p>ç”¨æ¥åœ¨æ„å»ºé•œåƒè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ENV MY_PATH /usr/mytest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™ä¸ªç¯å¢ƒå˜é‡å¯ä»¥åœ¨åç»­çš„ä»»ä½•RUNæŒ‡ä»¤ä¸­ä½¿ç”¨ï¼Œè¿™å°±å¦‚åŒåœ¨å‘½ä»¤å‰é¢æŒ‡å®šäº†ç¯å¢ƒå˜é‡å‰ç¼€ä¸€æ ·ï¼›</p><p>ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒæŒ‡ä»¤ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ã€‚</p><p>æ¯”å¦‚ï¼š<code>WORKDIR $MY_PATH</code></p><p><strong>ADD</strong></p><p>å°†å®¿ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”ä¼šè‡ªåŠ¨å¤„ç†URLå’Œè§£å‹tarå‹ç¼©åŒ…</p><p><strong>COPY</strong></p><p>ç±»ä¼¼ADDï¼Œæ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒä¸­ã€‚</p><p>å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ &lt;æºè·¯å¾„&gt; çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„ &lt;ç›®æ ‡è·¯å¾„&gt; ä½ç½®</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>COPY src dest</span></span>
<span class="line"><span>COPY [&quot;src&quot;, &quot;dest&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>&lt;srcæºè·¯å¾„&gt;ï¼šæºæ–‡ä»¶æˆ–è€…æºç›®å½•</p><p>&lt;destç›®æ ‡è·¯å¾„&gt;ï¼šå®¹å™¨å†…çš„æŒ‡å®šè·¯å¾„ï¼Œè¯¥è·¯å¾„ä¸ç”¨äº‹å…ˆå»ºå¥½ï¼Œè·¯å¾„ä¸å­˜åœ¨çš„è¯ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p><p><strong>VOLUME</strong></p><p>å®¹å™¨æ•°æ®å·ï¼Œç”¨äºæ•°æ®ä¿å­˜å’ŒæŒä¹…åŒ–å·¥ä½œ</p><p><strong>CMD</strong></p><p>æŒ‡å®šå®¹å™¨å¯åŠ¨åçš„è¦å¹²çš„äº‹æƒ…</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013470341-d8868461-36e0-412b-9763-233d14746823.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>Dockerfile ä¸­å¯ä»¥æœ‰å¤šä¸ª CMD æŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼ŒCMD ä¼šè¢« docker run ä¹‹åçš„å‚æ•°æ›¿æ¢ã€‚</p><p>å‚è€ƒå®˜ç½‘Tomcatçš„dockerfileæ¼”ç¤ºè®²è§£ï¼š</p><p>å®˜ç½‘æœ€åä¸€è¡Œå‘½ä»¤</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013529609-d6979855-7c7d-4782-803c-43b2d6c871c0.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æˆ‘ä»¬æ¼”ç¤ºè‡ªå·±çš„è¦†ç›–æ“ä½œ</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013524209-af8d1240-9240-4fa7-8582-78e3e6704212.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å®ƒå’Œå‰é¢RUNå‘½ä»¤çš„åŒºåˆ«</p><ul><li>CMDæ˜¯åœ¨docker run æ—¶è¿è¡Œã€‚</li><li>RUNæ˜¯åœ¨ docker build æ—¶è¿è¡Œã€‚</li></ul><p><strong>ENTRYPOINT</strong></p><p>ä¹Ÿæ˜¯ç”¨æ¥æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤</p><p>ç±»ä¼¼äº CMD æŒ‡ä»¤ï¼Œä½†æ˜¯ENTRYPOINTä¸ä¼šè¢«docker runåé¢çš„å‘½ä»¤è¦†ç›–ï¼Œ è€Œä¸”è¿™äº›å‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å½“ä½œå‚æ•°é€ç»™ ENTRYPOINT æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºã€‚</p><p>å‘½ä»¤æ ¼å¼å’Œæ¡ˆä¾‹è¯´æ˜</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013696660-44f47c05-55ed-49ea-b01b-d5c5ceaad1f9.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ENTRYPOINTå¯ä»¥å’ŒCMDä¸€èµ·ç”¨ï¼Œä¸€èˆ¬æ˜¯å˜å‚æ‰ä¼šä½¿ç”¨ CMD ï¼Œè¿™é‡Œçš„ CMD ç­‰äºæ˜¯åœ¨ç»™ ENTRYPOINT ä¼ å‚ã€‚</p><p>å½“æŒ‡å®šäº†ENTRYPOINTåï¼ŒCMDçš„å«ä¹‰å°±å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸å†æ˜¯ç›´æ¥è¿è¡Œå…¶å‘½ä»¤è€Œæ˜¯å°†CMDçš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’ç»™ENTRYPOINTæŒ‡ä»¤ï¼Œä»–ä¸¤ä¸ªç»„åˆä¼šå˜æˆ</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013728508-f1d618bc-11f9-4fc2-acdd-c5b111ee1804.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼šå‡è®¾å·²é€šè¿‡ Dockerfile æ„å»ºäº† nginx:test é•œåƒï¼š</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013737191-54f5780e-bc5f-419a-92e5-95f980e7cb7d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013973533-8d49c0c9-0ea4-45a0-b2e3-14d3f28a33a0.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¼˜ç‚¹ï¼šåœ¨æ‰§è¡Œdocker runçš„æ—¶å€™å¯ä»¥æŒ‡å®š ENTRYPOINT è¿è¡Œæ‰€éœ€çš„å‚æ•°ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœ Dockerfile ä¸­å¦‚æœå­˜åœ¨å¤šä¸ª ENTRYPOINT æŒ‡ä»¤ï¼Œä»…æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p><p><strong>å°æ€»ç»“</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660013999567-eea06f1d-f9ac-425e-a851-c5dda92b5ce5.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="_2-4-æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-4-æ¡ˆä¾‹"><span>2.4 æ¡ˆä¾‹</span></a></h2><h3 id="_2-4-1-è‡ªå®šä¹‰é•œåƒmycentosjava8" tabindex="-1"><a class="header-anchor" href="#_2-4-1-è‡ªå®šä¹‰é•œåƒmycentosjava8"><span>2.4.1 è‡ªå®šä¹‰é•œåƒmycentosjava8</span></a></h3><p><strong>è¦æ±‚</strong></p><p>Centos7é•œåƒå…·å¤‡vim+ifconfig+jdk8</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014531015-748a0daa-758a-44ea-9496-34d5e34810e0.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>JDKçš„ä¸‹è½½é•œåƒåœ°å€ï¼š<a href="https://www.oracle.com/java/technologies/downloads/#java8" target="_blank" rel="noopener noreferrer">https://www.oracle.com/java/technologies/downloads/#java8</a></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014469696-1c74ba76-2119-4031-8337-4ab9880aec14.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><a href="https://mirrors.yangxingzhen.com/jdk/" target="_blank" rel="noopener noreferrer">https://mirrors.yangxingzhen.com/jdk/</a></p><p><strong>ç¼–å†™</strong></p><p>å‡†å¤‡ç¼–å†™Dockerfileæ–‡ä»¶</p><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> centos</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> zzyy&lt;zzyybs@126.com&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> MYPATH /usr/local</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $MYPATH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#å®‰è£…vimç¼–è¾‘å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> yum -y install vim</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#å®‰è£…ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œIP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> yum -y install net-tools</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#å®‰è£…java8åŠlibåº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> yum -y install glibc.i686</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> mkdir /usr/local/java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#ADD æ˜¯ç›¸å¯¹è·¯å¾„jar,æŠŠjdk-8u171-linux-x64.tar.gzæ·»åŠ åˆ°å®¹å™¨ä¸­,å®‰è£…åŒ…å¿…é¡»è¦å’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> jdk-8u171-linux-x64.tar.gz /usr/local/java/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#é…ç½®javaç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> JAVA_HOME /usr/local/java/jdk1.8.0_171</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> JRE_HOME $JAVA_HOME/jre</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> PATH $JAVA_HOME/bin:$PATH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> echo $MYPATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> echo </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;success--------------ok&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤§å†™å­—æ¯D</p><p><strong>æ„å»º</strong></p><p>docker build -t æ–°é•œåƒåå­—:TAG .</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker build -t centosjava8:1.5 .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014597535-9bd29a0a-3a5e-4e51-bad4-df136dd6c0fd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014603485-ae9f7bae-798e-4538-9a35-05ddd6226cc5.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ³¨æ„ï¼Œä¸Šé¢TAGåé¢æœ‰ä¸ªç©ºæ ¼ï¼Œæœ‰ä¸ªç‚¹</p><p><strong>è¿è¡Œ</strong></p><p>docker run -it æ–°é•œåƒåå­—:TAG</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run -it centosjava8:1.5 /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014631293-415ef8b0-d5c7-4107-9c47-19b58f568931.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>å†ä½“ä¼šä¸‹UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</strong></p><p>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼šUnionæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual filesystem)ã€‚Union æ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014653132-0f14d9d0-133d-436f-93ec-4a4dc6625ff4.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•</p><h3 id="_2-4-2-è™šæ‚¬é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_2-4-2-è™šæ‚¬é•œåƒ"><span>2.4.2 è™šæ‚¬é•œåƒ</span></a></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ä»“åº“åã€æ ‡ç­¾éƒ½æ˜¯&lt;none&gt;çš„é•œåƒï¼Œä¿—ç§°dangling image</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Dockerfileå†™ä¸€ä¸ª</p><ol><li><code>vim Dockerfile</code></li></ol><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>from ubuntu</span></span>
<span class="line"><span>CMD echo &#39;action is success&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>docker build .</code></li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014736138-8bb82a47-f06e-458d-b445-24077db9bdcd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>æŸ¥çœ‹</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker image ls -f dangling=true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å‘½ä»¤ç»“æœ</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014743652-1ed51439-61d8-4641-b75d-529e8bc74eb6.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>åˆ é™¤</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker image prune</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è™šæ‚¬é•œåƒå·²ç»å¤±å»å­˜åœ¨ä»·å€¼ï¼Œå¯ä»¥åˆ é™¤</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014763642-61295eb3-d313-4f8b-873c-ca674dff3b4d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2-4-3-å®¶åº­ä½œä¸š-è‡ªå®šä¹‰é•œåƒmyubuntu" tabindex="-1"><a class="header-anchor" href="#_2-4-3-å®¶åº­ä½œä¸š-è‡ªå®šä¹‰é•œåƒmyubuntu"><span>2.4.3 å®¶åº­ä½œä¸š-è‡ªå®šä¹‰é•œåƒmyubuntu</span></a></h3><p><strong>ç¼–å†™</strong></p><p>å‡†å¤‡ç¼–å†™DockerFileæ–‡ä»¶</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014788578-6dfe4fa8-d48d-402a-8c88-0ec91503aa7a.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ubuntu</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> zzyy&lt;zzyybs@126.com&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> MYPATH /usr/local</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $MYPATH</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> apt-get update</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> apt-get install net-tools</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#RUN apt-get install -y iproute2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#RUN apt-get install -y inetutils-ping</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 80</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> echo $MYPATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> echo </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;install inconfig cmd into ubuntu success--------------ok&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ„å»º</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker build -t æ–°é•œåƒåå­—:TAG .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>è¿è¡Œ</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run -it æ–°é•œåƒåå­—:TAG</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-5-å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_2-5-å°æ€»ç»“"><span>2.5 å°æ€»ç»“</span></a></h2><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660014827592-6677a045-601e-40ae-b864-752c300a67ec.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h1 id="_3-dockerå¾®æœåŠ¡å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_3-dockerå¾®æœåŠ¡å®æˆ˜"><span>3 Dockerå¾®æœåŠ¡å®æˆ˜</span></a></h1><h2 id="_3-1-é€šè¿‡ideaæ–°å»ºä¸€ä¸ªæ™®é€šå¾®æœåŠ¡æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_3-1-é€šè¿‡ideaæ–°å»ºä¸€ä¸ªæ™®é€šå¾®æœåŠ¡æ¨¡å—"><span>3.1 é€šè¿‡IDEAæ–°å»ºä¸€ä¸ªæ™®é€šå¾®æœåŠ¡æ¨¡å—</span></a></h2><p><strong>å»ºModule</strong></p><p>docker_boot</p><p><strong>æ”¹POM</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span>         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span></span>
<span class="line"><span>  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span></span>
<span class="line"><span>  &lt;parent&gt;</span></span>
<span class="line"><span>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;version&gt;2.5.6&lt;/version&gt;</span></span>
<span class="line"><span>    &lt;relativePath/&gt;</span></span>
<span class="line"><span>  &lt;/parent&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  &lt;groupId&gt;com.atguigu.docker&lt;/groupId&gt;</span></span>
<span class="line"><span>  &lt;artifactId&gt;docker_boot&lt;/artifactId&gt;</span></span>
<span class="line"><span>  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  &lt;properties&gt;</span></span>
<span class="line"><span>    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span></span>
<span class="line"><span>    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span></span>
<span class="line"><span>    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span></span>
<span class="line"><span>    &lt;junit.version&gt;4.12&lt;/junit.version&gt;</span></span>
<span class="line"><span>    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;</span></span>
<span class="line"><span>    &lt;lombok.version&gt;1.16.18&lt;/lombok.version&gt;</span></span>
<span class="line"><span>    &lt;mysql.version&gt;5.1.47&lt;/mysql.version&gt;</span></span>
<span class="line"><span>    &lt;druid.version&gt;1.1.16&lt;/druid.version&gt;</span></span>
<span class="line"><span>    &lt;mapper.version&gt;4.1.5&lt;/mapper.version&gt;</span></span>
<span class="line"><span>    &lt;mybatis.spring.boot.version&gt;1.3.0&lt;/mybatis.spring.boot.version&gt;</span></span>
<span class="line"><span>  &lt;/properties&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  &lt;dependencies&gt;</span></span>
<span class="line"><span>    &lt;!--SpringBooté€šç”¨ä¾èµ–æ¨¡å—--&gt;</span></span>
<span class="line"><span>    &lt;dependency&gt;</span></span>
<span class="line"><span>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;/dependency&gt;</span></span>
<span class="line"><span>    &lt;dependency&gt;</span></span>
<span class="line"><span>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</span></span>
<span class="line"><span>    &lt;/dependency&gt;</span></span>
<span class="line"><span>    &lt;!--test--&gt;</span></span>
<span class="line"><span>    &lt;dependency&gt;</span></span>
<span class="line"><span>      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span></span>
<span class="line"><span>      &lt;scope&gt;test&lt;/scope&gt;</span></span>
<span class="line"><span>    &lt;/dependency&gt;</span></span>
<span class="line"><span>  &lt;/dependencies&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  &lt;build&gt;</span></span>
<span class="line"><span>    &lt;plugins&gt;</span></span>
<span class="line"><span>      &lt;plugin&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span></span>
<span class="line"><span>      &lt;/plugin&gt;</span></span>
<span class="line"><span>      &lt;plugin&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;version&gt;3.1.0&lt;/version&gt;</span></span>
<span class="line"><span>      &lt;/plugin&gt;</span></span>
<span class="line"><span>    &lt;/plugins&gt;</span></span>
<span class="line"><span>  &lt;/build&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>&lt;/project&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å†™YML</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>server.port=6001</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>ä¸»å¯åŠ¨</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> com.atguigu.docker</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.boot.SpringApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.boot.autoconfigure.SpringBootApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> DockerBootApplication</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DockerBootApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸šåŠ¡ç±»</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> com.atguigu.docker.controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.annotation.Value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RequestMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RestController</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.UUID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> * @auther zzyy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> * @create 2021-10-25 17:43</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> OrderController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;${server.port}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/order/docker&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> helloDocker</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hello docker&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">port</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> UUID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/order/index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">method</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RequestMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> index</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;æœåŠ¡ç«¯å£å·: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">port</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-2-é€šè¿‡dockerfileå‘å¸ƒå¾®æœåŠ¡éƒ¨ç½²åˆ°dockerå®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_3-2-é€šè¿‡dockerfileå‘å¸ƒå¾®æœåŠ¡éƒ¨ç½²åˆ°dockerå®¹å™¨"><span>3.2 é€šè¿‡dockerfileå‘å¸ƒå¾®æœåŠ¡éƒ¨ç½²åˆ°dockerå®¹å™¨</span></a></h2><p><strong>IDEAå·¥å…·é‡Œé¢æå®šå¾®æœåŠ¡jaråŒ…</strong></p><p>docker_boot-0.0.1-SNAPSHOT.jar</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015228582-d53dce4a-89a7-4f66-bbc1-4efc307f24d3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>ç¼–å†™Dockerfile</strong></p><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># åŸºç¡€é•œåƒä½¿ç”¨java</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> java:8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ä½œè€…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> zzyy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># VOLUME æŒ‡å®šä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸º/tmpï¼Œåœ¨ä¸»æœº/var/lib/dockerç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¹¶é“¾æ¥åˆ°å®¹å™¨çš„/tmp</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">VOLUME</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># å°†jaråŒ…æ·»åŠ åˆ°å®¹å™¨ä¸­å¹¶æ›´åä¸ºzzyy_docker.jar</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> docker_boot-0.0.1-SNAPSHOT.jar zzyy_docker.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># è¿è¡ŒjaråŒ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> bash -c </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;touch /zzyy_docker.jar&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/zzyy_docker.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#æš´éœ²6001ç«¯å£ä½œä¸ºå¾®æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 6001</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†å¾®æœåŠ¡jaråŒ…å’ŒDockerfileæ–‡ä»¶ä¸Šä¼ åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹/mydocker</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015279664-11ace734-3cac-448d-acf2-415ff4618e8e.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker build -t zzyy_docker:1.6 .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ„å»ºé•œåƒ</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker build -t zzyy_docker:1.6 .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‰“åŒ…æˆé•œåƒæ–‡ä»¶</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015379854-488ba2d7-ee4a-4e28-8b07-9fa24f239263.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>è¿è¡Œå®¹å™¨</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span> docker run -d -p 6001:6001 zzyy_docker:1.6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015407249-1b8e1153-a117-406c-bc76-f9688c909e0d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>è®¿é—®æµ‹è¯•</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660015422129-27734091-90d4-43cf-8725-27c4eef8548e.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h1 id="_4-dockerç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#_4-dockerç½‘ç»œ"><span>4 Dockerç½‘ç»œ</span></a></h1><h2 id="æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ˜¯ä»€ä¹ˆ"><span>æ˜¯ä»€ä¹ˆ</span></a></h2><p><strong>dockerä¸å¯åŠ¨ï¼Œé»˜è®¤ç½‘ç»œæƒ…å†µ</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016500199-9bfcce87-7c5d-4ac4-8d40-3e9e9491a0fd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ens33</p><p>lo</p><p>virbr0</p><p>åœ¨CentOS7çš„å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœæœ‰é€‰æ‹©ç›¸å…³è™šæ‹ŸåŒ–çš„çš„æœåŠ¡å®‰è£…ç³»ç»Ÿåï¼Œå¯åŠ¨ç½‘å¡æ—¶ä¼šå‘ç°æœ‰ä¸€ä¸ªä»¥ç½‘æ¡¥è¿æ¥çš„ç§ç½‘åœ°å€çš„virbr0ç½‘å¡(virbr0ç½‘å¡ï¼šå®ƒè¿˜æœ‰ä¸€ä¸ªå›ºå®šçš„é»˜è®¤IPåœ°å€192.168.122.1)ï¼Œæ˜¯åšè™šæ‹Ÿæœºç½‘æ¡¥çš„ä½¿ç”¨çš„ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºè¿æ¥å…¶ä¸Šçš„è™šæœºç½‘å¡æä¾› NATè®¿é—®å¤–ç½‘çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰å­¦ä¹ Linuxå®‰è£…ï¼Œå‹¾é€‰å®‰è£…ç³»ç»Ÿçš„æ—¶å€™é™„å¸¦äº†libvirtæœåŠ¡æ‰ä¼šç”Ÿæˆçš„ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥å°†libvirtdæœåŠ¡å¸è½½ï¼Œ</p><p>yum remove libvirt-libs.x86_64</p><p><strong>dockerå¯åŠ¨åï¼Œç½‘ç»œæƒ…å†µ</strong></p><p>ä¼šäº§ç”Ÿä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘æ¡¥</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016581784-bbd7401b-0304-40e5-b3d4-143e1b6adbcd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æŸ¥çœ‹dockerç½‘ç»œæ¨¡å¼å‘½ä»¤ï¼Œé»˜è®¤åˆ›å»º3å¤§ç½‘ç»œæ¨¡å¼ã€‚</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660016611099-39c73410-3a1c-4576-b566-48234db9c1bc.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="å¸¸ç”¨åŸºæœ¬å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨åŸºæœ¬å‘½ä»¤"><span>å¸¸ç”¨åŸºæœ¬å‘½ä»¤</span></a></h2><p><strong>Allå‘½ä»¤</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660020074503-4a28db4d-8a0f-4f21-ab74-0b999e579207.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>æŸ¥çœ‹ç½‘ç»œ</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker network ls</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æŸ¥çœ‹ç½‘ç»œæºæ•°æ®</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker network inspect XXXç½‘ç»œåå­—</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>åˆ é™¤ç½‘ç»œ</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker network rm XXXç½‘ç»œåå­—</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ¡ˆä¾‹</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660020104133-dbc519f6-d0e1-4bec-af0c-40ec9db8d1e4.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="èƒ½å¹²å˜›" tabindex="-1"><a class="header-anchor" href="#èƒ½å¹²å˜›"><span>èƒ½å¹²å˜›</span></a></h2><p>å®¹å™¨é—´çš„äº’è”å’Œé€šä¿¡ä»¥åŠç«¯å£æ˜ å°„</p><p>å®¹å™¨IPå˜åŠ¨æ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡åç›´æ¥ç½‘ç»œé€šä¿¡è€Œä¸å—åˆ°å½±å“</p><h2 id="ç½‘ç»œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œæ¨¡å¼"><span>ç½‘ç»œæ¨¡å¼</span></a></h2><p><strong>æ€»ä½“ä»‹ç»</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028923163-79ad77b4-a9ae-4dd6-8786-aacd45788733.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>bridgeæ¨¡å¼ï¼šä½¿ç”¨--network bridgeæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨docker0</p><p>hostæ¨¡å¼ï¼šä½¿ç”¨--network hostæŒ‡å®š</p><p>noneæ¨¡å¼ï¼šä½¿ç”¨--network noneæŒ‡å®š</p><p>containeræ¨¡å¼ï¼šä½¿ç”¨--network container:NAMEæˆ–è€…å®¹å™¨IDæŒ‡å®š</p><p><strong>å®¹å™¨å®ä¾‹å†…é»˜è®¤ç½‘ç»œIPç”Ÿäº§è§„åˆ™</strong></p><ol><li>å…ˆå¯åŠ¨ä¸¤ä¸ªubuntuå®¹å™¨å®ä¾‹</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028984092-3cd2b316-73da-4072-b045-de7fbcb392a3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>docker inspect å®¹å™¨ID or å®¹å™¨åå­—</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028988258-aa1db7cd-2f6f-4e08-b991-875723ee24de.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>å…³é—­u2å®ä¾‹ï¼Œæ–°å»ºu3ï¼ŒæŸ¥çœ‹ipå˜åŒ–</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660028995174-805d3a36-8f02-4c56-a753-0048a859cd73.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç»“è®º</p><p>dockerå®¹å™¨å†…éƒ¨çš„ipæ˜¯æœ‰å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜çš„</p><p><strong>æ¡ˆä¾‹è¯´æ˜</strong></p><p>todo</p><p>æ¡ˆä¾‹è¯´æ˜</p><p>bridge</p><p>æ˜¯ä»€ä¹ˆ</p><p>æ¡ˆä¾‹</p><p>è¯´æ˜</p><p>ä»£ç </p><p>docker run -d -p 8081:8080 --name tomcat81 billygoo/tomcat8-jdk8</p><p>docker run -d -p 8082:8080 --name tomcat82 billygoo/tomcat8-jdk8</p><p>ä¸¤ä¸¤åŒ¹é…éªŒè¯</p><p>host</p><p>æ˜¯ä»€ä¹ˆ</p><p>æ¡ˆä¾‹</p><p>è¯´æ˜</p><p>ä»£ç </p><p>è­¦å‘Š</p><p>docker run -d -p 8083:8080 --network host --name tomcat83 billygoo/tomcat8-jdk8</p><p>æ­£ç¡®</p><p>docker run -d --network host --name tomcat83 billygoo/tomcat8-jdk8</p><p>æ— ä¹‹å‰çš„é…å¯¹æ˜¾ç¤ºäº†ï¼Œçœ‹å®¹å™¨å®ä¾‹å†…éƒ¨</p><p>æ²¡æœ‰è®¾ç½®-pçš„ç«¯å£æ˜ å°„äº†ï¼Œå¦‚ä½•è®¿é—®å¯åŠ¨çš„tomcat83ï¼Ÿï¼Ÿ</p><p>none</p><p>æ˜¯ä»€ä¹ˆ</p><p>ç¦ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œåªæœ‰loæ ‡è¯†(å°±æ˜¯127.0.0.1è¡¨ç¤ºæœ¬åœ°å›ç¯)</p><p>æ¡ˆä¾‹</p><p>docker run -d -p 8084:8080 --network none --name tomcat84 billygoo/tomcat8-jdk8</p><p>container</p><p>æ˜¯ä»€ä¹ˆ</p><p>æ¡ˆä¾‹</p><p>docker run -d -p 8085:8080 --name tomcat85 billygoo/tomcat8-jdk8</p><p>docker run -d -p 8086:8080 --network container:tomcat85 --name tomcat86 billygoo/tomcat8-jdk8</p><p>è¿è¡Œç»“æœ</p><p>æ¡ˆä¾‹2</p><p>Alpineæ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªé¢å‘å®‰å…¨çš„è½»å‹ Linuxå‘è¡Œç‰ˆ</p><p>docker run -it --name alpine1 alpine /bin/sh</p><p>docker run -it --network container:alpine1 --name alpine2 alpine /bin/sh</p><p>è¿è¡Œç»“æœï¼ŒéªŒè¯å…±ç”¨æ­æ¡¥</p><p>å‡å¦‚æ­¤æ—¶å…³é—­alpine1ï¼Œå†çœ‹çœ‹alpine2</p><p>è‡ªå®šä¹‰ç½‘ç»œ</p><p>è¿‡æ—¶çš„link</p><p>æ˜¯ä»€ä¹ˆ</p><p>æ¡ˆä¾‹</p><p>before</p><p>æ¡ˆä¾‹</p><p>docker run -d -p 8081:8080 --name tomcat81 billygoo/tomcat8-jdk8</p><p>docker run -d -p 8082:8080 --name tomcat82 billygoo/tomcat8-jdk8</p><p>ä¸Šè¿°æˆåŠŸå¯åŠ¨å¹¶ç”¨docker execè¿›å…¥å„è‡ªå®¹å™¨å®ä¾‹å†…éƒ¨</p><p>é—®é¢˜</p><p>æŒ‰ç…§IPåœ°å€pingæ˜¯OKçš„</p><p>æŒ‰ç…§æœåŠ¡åpingç»“æœ???</p><p>after</p><p>æ¡ˆä¾‹</p><p>è‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œ,è‡ªå®šä¹‰ç½‘ç»œé»˜è®¤ä½¿ç”¨çš„æ˜¯æ¡¥æ¥ç½‘ç»œbridge</p><p>æ–°å»ºè‡ªå®šä¹‰ç½‘ç»œ</p><p>æ–°å»ºå®¹å™¨åŠ å…¥ä¸Šä¸€æ­¥æ–°å»ºçš„è‡ªå®šä¹‰ç½‘ç»œ</p><p>docker run -d -p 8081:8080 --network zzyy_network --name tomcat81 billygoo/tomcat8-jdk8</p><p>docker run -d -p 8082:8080 --network zzyy_network --name tomcat82 billygoo/tomcat8-jdk8</p><p>äº’ç›¸pingæµ‹è¯•</p><p>é—®é¢˜ç»“è®º</p><p>è‡ªå®šä¹‰ç½‘ç»œæœ¬èº«å°±ç»´æŠ¤å¥½äº†ä¸»æœºåå’Œipçš„å¯¹åº”å…³ç³»ï¼ˆipå’ŒåŸŸåéƒ½èƒ½é€šï¼‰</p><p>è‡ªå®šä¹‰ç½‘ç»œæœ¬èº«å°±ç»´æŠ¤å¥½äº†ä¸»æœºåå’Œipçš„å¯¹åº”å…³ç³»ï¼ˆipå’ŒåŸŸåéƒ½èƒ½é€šï¼‰</p><p>è‡ªå®šä¹‰ç½‘ç»œæœ¬èº«å°±ç»´æŠ¤å¥½äº†ä¸»æœºåå’Œipçš„å¯¹åº”å…³ç³»ï¼ˆipå’ŒåŸŸåéƒ½èƒ½é€šï¼‰</p><h2 id="dockerå¹³å°æ¶æ„å›¾è§£" tabindex="-1"><a class="header-anchor" href="#dockerå¹³å°æ¶æ„å›¾è§£"><span>Dockerå¹³å°æ¶æ„å›¾è§£</span></a></h2><p><strong>æ•´ä½“è¯´æ˜</strong></p><p>ä»å…¶æ¶æ„å’Œè¿è¡Œæµç¨‹æ¥çœ‹ï¼ŒDocker æ˜¯ä¸€ä¸ª C/S æ¨¡å¼çš„æ¶æ„ï¼Œåç«¯æ˜¯ä¸€ä¸ªæ¾è€¦åˆæ¶æ„ï¼Œä¼—å¤šæ¨¡å—å„å¸å…¶èŒã€‚</p><p>Docker è¿è¡Œçš„åŸºæœ¬æµç¨‹ä¸ºï¼š</p><p>1 ç”¨æˆ·æ˜¯ä½¿ç”¨ Docker Client ä¸ Docker Daemon å»ºç«‹é€šä¿¡ï¼Œå¹¶å‘é€è¯·æ±‚ç»™åè€…ã€‚</p><p>2 Docker Daemon ä½œä¸º Docker æ¶æ„ä¸­çš„ä¸»ä½“éƒ¨åˆ†ï¼Œé¦–å…ˆæä¾› Docker Server çš„åŠŸèƒ½ä½¿å…¶å¯ä»¥æ¥å— Docker Client çš„è¯·æ±‚ã€‚</p><p>3 Docker Engine æ‰§è¡Œ Docker å†…éƒ¨çš„ä¸€ç³»åˆ—å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä»¥ä¸€ä¸ª Job çš„å½¢å¼çš„å­˜åœ¨ã€‚</p><p>4 Job çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦å®¹å™¨é•œåƒæ—¶ï¼Œåˆ™ä» Docker Registry ä¸­ä¸‹è½½é•œåƒï¼Œå¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨ Graph driverå°†ä¸‹è½½é•œåƒä»¥Graphçš„å½¢å¼å­˜å‚¨ã€‚</p><p>5 å½“éœ€è¦ä¸º Docker åˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶ï¼Œé€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨ Network driver åˆ›å»ºå¹¶é…ç½® Docker å®¹å™¨ç½‘ç»œç¯å¢ƒã€‚</p><p>6 å½“éœ€è¦é™åˆ¶ Docker å®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶ï¼Œåˆ™é€šè¿‡ Execdriver æ¥å®Œæˆã€‚</p><p>7 Libcontaineræ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…ï¼ŒNetwork driverä»¥åŠExec driveréƒ½æ˜¯é€šè¿‡Libcontaineræ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œã€‚</p><p><strong>æ•´ä½“æ¶æ„</strong></p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660032915706-ca6ff6ae-5f12-4932-9a51-934cd86d5222.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h1 id="_5-docker-composeå®¹å™¨ç¼–æ’" tabindex="-1"><a class="header-anchor" href="#_5-docker-composeå®¹å™¨ç¼–æ’"><span>5 Docker-composeå®¹å™¨ç¼–æ’</span></a></h1><p>Docker-composeå®¹å™¨ç¼–æ’</p><p>æ˜¯ä»€ä¹ˆ</p><p>Docker-Composeæ˜¯Dockerå®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œ è´Ÿè´£å®ç°å¯¹Dockerå®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚</p><p>èƒ½å¹²å˜›</p><p>å»å“ªä¸‹</p><p>å®˜ç½‘</p><p><a href="https://docs.docker.com/compose/compose-file/compose-file-v3/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/compose-file-v3/</a></p><p>å®˜ç½‘ä¸‹è½½</p><p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/</a></p><p>å®‰è£…æ­¥éª¤</p><p>å¸è½½æ­¥éª¤</p><p>Composeæ ¸å¿ƒæ¦‚å¿µ</p><p>ä¸€æ–‡ä»¶</p><p>docker-compose.yml</p><p>ä¸¤è¦ç´ </p><p>æœåŠ¡ï¼ˆserviceï¼‰</p><p>ä¸€ä¸ªä¸ªåº”ç”¨å®¹å™¨å®ä¾‹ï¼Œæ¯”å¦‚è®¢å•å¾®æœåŠ¡ã€åº“å­˜å¾®æœåŠ¡ã€mysqlå®¹å™¨ã€nginxå®¹å™¨æˆ–è€…rediså®¹å™¨</p><p>å·¥ç¨‹ï¼ˆprojectï¼‰</p><p>ç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</p><p>Composeä½¿ç”¨çš„ä¸‰ä¸ªæ­¥éª¤</p><p>ç¼–å†™Dockerfileå®šä¹‰å„ä¸ªå¾®æœåŠ¡åº”ç”¨å¹¶æ„å»ºå‡ºå¯¹åº”çš„é•œåƒæ–‡ä»¶</p><p>ä½¿ç”¨ docker-compose.yml å®šä¹‰ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œå®‰æ’å¥½æ•´ä½“åº”ç”¨ä¸­çš„å„ä¸ªå®¹å™¨æœåŠ¡ã€‚</p><p>æœ€åï¼Œæ‰§è¡Œdocker-compose upå‘½ä»¤ æ¥å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå®Œæˆä¸€é”®éƒ¨ç½²ä¸Šçº¿</p><p>Composeå¸¸ç”¨å‘½ä»¤</p><p>Composeç¼–æ’å¾®æœåŠ¡</p><p>æ”¹é€ å‡çº§å¾®æœåŠ¡å·¥ç¨‹docker_boot</p><p>ä»¥å‰çš„åŸºç¡€ç‰ˆ</p><p>SQLå»ºè¡¨å»ºåº“</p><p>ä¸€é”®ç”Ÿæˆè¯´æ˜</p><p>æ”¹POM</p><p>å†™YML</p><p>ä¸»å¯åŠ¨</p><p>ä¸šåŠ¡ç±»</p><p>mvn packageå‘½ä»¤å°†å¾®æœåŠ¡å½¢æˆæ–°çš„jaråŒ… å¹¶ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨/mydockerç›®å½•ä¸‹</p><p>ç¼–å†™Dockerfile</p><p>æ„å»ºé•œåƒ</p><p>docker build -t zzyy_docker:1.6 .</p><p>ä¸ç”¨Compose</p><p>å•ç‹¬çš„mysqlå®¹å™¨å®ä¾‹</p><p>æ–°å»ºmysqlå®¹å™¨å®ä¾‹</p><p>è¿›å…¥mysqlå®¹å™¨å®ä¾‹å¹¶æ–°å»ºåº“db2021+æ–°å»ºè¡¨t_user</p><p>å•ç‹¬çš„rediså®¹å™¨å®ä¾‹</p><p>å¾®æœåŠ¡å·¥ç¨‹</p><p>ä¸Šé¢ä¸‰ä¸ªå®¹å™¨å®ä¾‹ä¾æ¬¡é¡ºåºå¯åŠ¨æˆåŠŸ</p><p>swaggeræµ‹è¯•</p><p><a href="http://localhost" target="_blank" rel="noopener noreferrer">http://localhost</a>:ä½ çš„å¾®æœåŠ¡ç«¯å£/swagger-ui.html#/</p><p>ä¸Šé¢æˆåŠŸäº†ï¼Œæœ‰å“ªäº›é—®é¢˜?</p><p>å…ˆåé¡ºåºè¦æ±‚å›ºå®šï¼Œå…ˆmysql+redisæ‰èƒ½å¾®æœåŠ¡è®¿é—®æˆåŠŸ</p><p>å¤šä¸ªrunå‘½ä»¤......</p><p>å®¹å™¨é—´çš„å¯åœæˆ–å®•æœºï¼Œæœ‰å¯èƒ½å¯¼è‡´IPåœ°å€å¯¹åº”çš„å®¹å™¨å®ä¾‹å˜åŒ–ï¼Œæ˜ å°„å‡ºé”™ï¼Œ è¦ä¹ˆç”Ÿäº§IPå†™æ­»(å¯ä»¥ä½†æ˜¯ä¸æ¨è)ï¼Œè¦ä¹ˆé€šè¿‡æœåŠ¡è°ƒç”¨</p><p>ä½¿ç”¨Compose</p><p>æœåŠ¡ç¼–æ’ï¼Œä¸€å¥—å¸¦èµ°ï¼Œå®‰æ’</p><p>ç¼–å†™docker-compose.ymlæ–‡ä»¶</p><p>ç¬¬äºŒæ¬¡ä¿®æ”¹å¾®æœåŠ¡å·¥ç¨‹docker_boot</p><p>å†™YML</p><p>é€šè¿‡æœåŠ¡åè®¿é—®ï¼ŒIPæ— å…³</p><p>mvn packageå‘½ä»¤å°†å¾®æœåŠ¡å½¢æˆæ–°çš„jaråŒ… å¹¶ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨/mydockerç›®å½•ä¸‹</p><p>ç¼–å†™Dockerfile</p><p>æ„å»ºé•œåƒ</p><p>docker build -t zzyy_docker:1.6 .</p><p>æ‰§è¡Œ docker-compose up æˆ–è€… æ‰§è¡Œ docker-compose up -d</p><p>è¿›å…¥mysqlå®¹å™¨å®ä¾‹å¹¶æ–°å»ºåº“db2021+æ–°å»ºè¡¨t_user</p><p>æµ‹è¯•é€šè¿‡</p><p>Composeå¸¸ç”¨å‘½ä»¤</p><p>å…³åœ</p><h1 id="_6-dockerè½»é‡çº§å¯è§†åŒ–å·¥å…·portainer" tabindex="-1"><a class="header-anchor" href="#_6-dockerè½»é‡çº§å¯è§†åŒ–å·¥å…·portainer"><span>6 Dockerè½»é‡çº§å¯è§†åŒ–å·¥å…·Portainer</span></a></h1><h2 id="æ˜¯ä»€ä¹ˆ-1" tabindex="-1"><a class="header-anchor" href="#æ˜¯ä»€ä¹ˆ-1"><span>æ˜¯ä»€ä¹ˆ</span></a></h2><p>Portainer æ˜¯ä¸€æ¬¾è½»é‡çº§çš„åº”ç”¨ï¼Œå®ƒæä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œç”¨äºæ–¹ä¾¿åœ°ç®¡ç†Dockerç¯å¢ƒï¼ŒåŒ…æ‹¬å•æœºç¯å¢ƒå’Œé›†ç¾¤ç¯å¢ƒã€‚</p><h2 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…"><span>å®‰è£…</span></a></h2><p><strong>å®˜ç½‘</strong></p><p><a href="https://www.portainer.io/" target="_blank" rel="noopener noreferrer">https://www.portainer.io/</a></p><p><a href="https://docs.portainer.io/v/ce-2.9/start/install/server/docker/linux" target="_blank" rel="noopener noreferrer">https://docs.portainer.io/v/ce-2.9/start/install/server/docker/linux</a></p><p><strong>æ­¥éª¤</strong></p><ol><li><strong>dockerå‘½ä»¤å®‰è£…</strong></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8000:8000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 9000:9000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> portainer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">--restart</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">always</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">-v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> portainer_data:/data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">portainer/portainer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><strong>ç¬¬ä¸€æ¬¡ç™»å½•éœ€åˆ›å»ºadminï¼Œè®¿é—®åœ°å€ï¼š<a href="http://xxx.xxx.xxx.xxx:9000" target="_blank" rel="noopener noreferrer">xxx.xxx.xxx.xxx:9000</a></strong></li></ol><p>ç”¨æˆ·åï¼Œç›´æ¥ç”¨é»˜è®¤admin</p><p>å¯†ç è®°å¾—8ä½ï¼Œéšä¾¿ä½ å†™</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033430938-9526470c-089a-4cde-8ee9-5bd3328f32fb.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><strong>è®¾ç½®adminç”¨æˆ·å’Œå¯†ç åé¦–æ¬¡ç™»é™†</strong></li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033444646-6696d6a3-ca9b-4546-88a4-89909eddf89d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><strong>é€‰æ‹©localé€‰é¡¹å¡åæœ¬åœ°dockerè¯¦ç»†ä¿¡æ¯å±•ç¤º</strong></li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033451033-300878aa-e6ba-42f1-9264-be57d65b87b3.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li><strong>ä¸Šä¸€æ­¥çš„å›¾å½¢å±•ç¤ºï¼Œèƒ½æƒ³å¾—èµ·å¯¹åº”å‘½ä»¤å—ï¼Ÿ</strong></li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660033457920-8e9618b2-6979-4d7c-8071-a2a098dc1128.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="ç™»é™†å¹¶æ¼”ç¤ºä»‹ç»å¸¸ç”¨æ“ä½œcase" tabindex="-1"><a class="header-anchor" href="#ç™»é™†å¹¶æ¼”ç¤ºä»‹ç»å¸¸ç”¨æ“ä½œcase"><span>ç™»é™†å¹¶æ¼”ç¤ºä»‹ç»å¸¸ç”¨æ“ä½œcase</span></a></h2><h1 id="_7-dockerå®¹å™¨ç›‘æ§ä¹‹-cadvisor-influxdb-granfana" tabindex="-1"><a class="header-anchor" href="#_7-dockerå®¹å™¨ç›‘æ§ä¹‹-cadvisor-influxdb-granfana"><span>7 Dockerå®¹å™¨ç›‘æ§ä¹‹ CAdvisor+InfluxDB+Granfana</span></a></h1><p>Dockerå®¹å™¨ç›‘æ§ä¹‹ CAdvisor+InfluxDB+Granfana</p><p>åŸç”Ÿå‘½ä»¤</p><p>æ“ä½œ</p><p>é—®é¢˜</p><p>æ˜¯ä»€ä¹ˆ</p><p>å®¹å™¨ç›‘æ§3å‰‘å®¢</p><p>ä¸€å¥è¯</p><p>CAdvisorç›‘æ§æ”¶é›†+InfluxDBå­˜å‚¨æ•°æ®+Granfanaå±•ç¤ºå›¾è¡¨</p><p>CAdvisor</p><p>InfluxDB</p><p>Granfana</p><p>æ€»ç»“</p><p>composeå®¹å™¨ç¼–æ’ï¼Œä¸€å¥—å¸¦èµ°</p><p>æ–°å»ºç›®å½•</p><p>æ–°å»º3ä»¶å¥—ç»„åˆçš„ docker-compose.yml</p><p>å¯åŠ¨docker-composeæ–‡ä»¶</p><p>docker-compose up</p><p>æŸ¥çœ‹ä¸‰ä¸ªæœåŠ¡å®¹å™¨æ˜¯å¦å¯åŠ¨</p><p>æµ‹è¯•</p><p>æµè§ˆcAdvisoræ”¶é›†æœåŠ¡ï¼Œ<a href="http://ip:8080/" target="_blank" rel="noopener noreferrer">http://ip:8080/</a></p><p>ç¬¬ä¸€æ¬¡è®¿é—®æ…¢ï¼Œè¯·ç¨ç­‰</p><p>cadvisorä¹Ÿæœ‰åŸºç¡€çš„å›¾å½¢å±•ç°åŠŸèƒ½ï¼Œè¿™é‡Œä¸»è¦ç”¨å®ƒæ¥ä½œæ•°æ®é‡‡é›†</p><p>æµè§ˆinfluxdbå­˜å‚¨æœåŠ¡ï¼Œ<a href="http://ip:8083/" target="_blank" rel="noopener noreferrer">http://ip:8083/</a></p><p>æµè§ˆgrafanaå±•ç°æœåŠ¡ï¼Œ<a href="http://ip:3000" target="_blank" rel="noopener noreferrer">http://ip:3000</a></p><p>ip+3000ç«¯å£çš„æ–¹å¼è®¿é—®,é»˜è®¤å¸æˆ·å¯†ç ï¼ˆadmin/adminï¼‰</p><p>é…ç½®æ­¥éª¤</p><p>é…ç½®æ•°æ®æº</p><p>é€‰æ‹©influxdbæ•°æ®æº</p><p>é…ç½®ç»†èŠ‚</p><p>1</p><p>2</p><p>é…ç½®é¢æ¿panel</p><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>åˆ°è¿™é‡ŒcAdvisor+InfluxDB+Grafanaå®¹å™¨ç›‘æ§ç³»ç»Ÿå°±éƒ¨ç½²å®Œæˆäº†</p><h1 id="_8-ç»ˆç« ã®æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-ç»ˆç« ã®æ€»ç»“"><span>8 ç»ˆç« ã®æ€»ç»“</span></a></h1><p>çŸ¥è¯†å›é¡¾ç®€å•ä¸²è®²å’Œæ€»ç»“</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/27791237/1660034195809-591c7f4b-dd7b-46a2-9865-7e2c01ae8239.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿›é˜¶ç¯‡ï¼šé›·ä¸°é˜³è€å¸ˆçš„K8S</p><p>å‚è€ƒï¼š</p><p><a href="https://www.yuque.com/li.xx/open/mw2ahb" target="_blank" rel="noopener noreferrer">https://www.yuque.com/li.xx/open/mw2ahb</a></p><p><a href="https://www.yuque.com/tmfl/cloud/cmnbme" target="_blank" rel="noopener noreferrer">https://www.yuque.com/tmfl/cloud/cmnbme</a></p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/justdoitMr/blogs//edit/master/themeHope/ContainerCloud/docker/act_two_docker_two.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2284609302@qq.com">ä¸çˆ±æ‰“ä»£ç çš„ç¨‹åºå‘˜</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/ContainerCloud/docker/act_one_docker_one.html" aria-label="1ã€DockeråŸºç¡€"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-file" style=""></span>1ã€DockeråŸºç¡€</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">äº‘åŸç”Ÿ</div><div class="vp-copyright">bugcode</div></footer></div><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.e972e9bb.js" defer></script><script src="/assets/js/9547.c8ff98a9.js" defer></script><script src="/assets/js/app.8a0774db.js" defer></script>
  </body>
</html>
